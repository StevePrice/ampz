<?xml version="1.0" encoding="UTF-8"?>
<category>
<snippet author="wibi" date_entered="2001-04-24" last_modified="2001-04-29 09:20:02" name="another date drop-down-menu" rating="4.09">
<description>If you make form with birtdate-field or any other date-fields then this simple script may be can help.</description>
<code>&lt;?&#x0D;&#x0A;/********************************************************************&#x0D;&#x0A;*&#x09;Date - form field function.&#x0D;&#x0A;*&#x09;Its return a drop-down-menu form-field&#x0D;&#x0A;*   Syntax :&#x0D;&#x0A;*&#x09;&#x09;- string listbox_date(string name, int selected-date);&#x0D;&#x0A;*&#x09;&#x09;- string listbox_month(string name, int selected-month);&#x0D;&#x0A;*&#x09;&#x09;- string listbox_year(string name, int start-year, int end-year, int selected-year);&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;Copyright (C) 2001 Wibisono Sastrodiwiryo. &#x0D;&#x0A;*   &#x09;This program is free software licensed under the &#x0D;&#x0A;*   &#x09;GNU General Public License (GPL).&#x0D;&#x0A;*&#x0D;&#x0A;*   CyberGL =&gt; Application Service Provider&#x0D;&#x0A;*   http://www.cybergl.co.id&#x0D;&#x0A;*&#x09;office@cybergl.co.id&#x0D;&#x0A;*&#x0D;&#x0A;*   $Id: date.php3,v 0.1 2001/04/24 21:6:31 wibi Exp $ &#x0D;&#x0A;*********************************************************************/&#x0D;&#x0A;&#x0D;&#x0A;function listbox_date ($name, $default=0) {&#x0D;&#x0A;&#x09;$result=&quot;&lt;select name=\&quot;$name\&quot; size=1&gt;\n&quot;;&#x0D;&#x0A;&#x09;for ($d=1;$d&lt;=31;$d++) {&#x0D;&#x0A;&#x09;&#x09;if ($default  == $d) {$selected=&quot;selected&quot;;} else {$selected=&quot;&quot;;}&#x0D;&#x0A;&#x09;&#x09;$result.=&quot;&lt;option value=\&quot;$d\&quot; $selected&gt;$d&lt;/option&gt;\n&quot;;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;$result.=&quot;&lt;/select&gt;\n&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function listbox_month ($name, $default=0) {&#x0D;&#x0A;&#x09;$result=&quot;&lt;select name=\&quot;$name\&quot; size=1&gt;\n&quot;;&#x0D;&#x0A;&#x09;for ($m=1;$m&lt;=12;$m++) {&#x0D;&#x0A;&#x09;&#x09;if ($default  == $m) {$selected=&quot;selected&quot;;} else {$selected=&quot;&quot;;}&#x0D;&#x0A;&#x09;&#x09;$result.=&quot;&lt;option value=\&quot;$m\&quot; $selected&gt;&quot;.date(M, mktime(0,0,0,$m,1,2000)).&quot;&lt;/option&gt;\n&quot;;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;$result.=&quot;&lt;/select&gt;\n&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function listbox_year ($name, $start, $end, $default=0) {&#x0D;&#x0A;&#x09;$result=&quot;&lt;select name=\&quot;$name\&quot; size=1&gt;\n&quot;;&#x0D;&#x0A;&#x09;for ($y=$end;$y&gt;=$start;$y--) {&#x0D;&#x0A;&#x09;&#x09;if ($default  == $y) {$selected=&quot;selected&quot;;} else {$selected=&quot;&quot;;}&#x0D;&#x0A;&#x09;&#x09;$result.=&quot;&lt;option value=\&quot;$y\&quot; $selected&gt;$y&lt;/option&gt;\n&quot;;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;$result.=&quot;&lt;/select&gt;\n&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;?&gt;</code>
</snippet>
<snippet author="robF" date_entered="2000-06-19" last_modified="2011-09-14 15:56:12" name="array to hidden fields" rating="4.00">
<description>takes a multidimensional array and puts all the elements into HTML hidden input types so data can be carried through to another page</description>
<code>function array_to_hidden($array, $carry = &quot;data&quot;) {&#x0D;&#x0A;&#x0D;&#x0A;    /* feed it a multidimensional array and it goes right down putting every&#x0D;&#x0A;     * non-blank element of every sub-array into a HIDDEN field of an HTML&#x0D;&#x0A;     * FORM. The second argument should be the name of the variable&#x0D;&#x0A;     *  you&apos;ve passed */&#x0D;&#x0A;&#x0D;&#x0A;    while(list($name, $value) = each($array)) {&#x0D;&#x0A;&#x0D;&#x0A;        if (is_array($value)):&#x0D;&#x0A;            array_to_hidden($value, &quot;${carry}[$name]&quot;);&#x0D;&#x0A;&#x0D;&#x0A;        /* uncomment the &quot;elseif&quot; if you don&apos;t want fields with blank values to be&#x0D;&#x0A;         * passed along. (don&apos;t forget to comment out the else of course!) */&#x0D;&#x0A;&#x0D;&#x0A;        //elseif (!ereg(&quot;^[ \n\t]*$&quot;, $value)):&#x0D;&#x0A;        else:&#x0D;&#x0A;            echo &quot;\n&lt;INPUT TYPE=\&quot;hidden\&quot; NAME=\&quot;${carry}[$name]\&quot; &quot;,&#x0D;&#x0A;            &quot;VALUE=\&quot;$value\&quot;&gt;&quot;;&#x0D;&#x0A;        endif;&#x0D;&#x0A;&#x0D;&#x0A;    }&#x0D;&#x0A;&#x0D;&#x0A;} &#x0D;&#x0A;</code>
</snippet>
<snippet author="gravestone" date_entered="2000-04-26" last_modified="2000-08-29 16:15:00" name="Auto fill drop down tables from a Access database" rating="3.50">
<description>Using this quick snippet you can auto fill your drop down boxes easily using microsoft access.</description>
<code>function display_data($usertable,$fieldname) {&#x0D;&#x0A;&#x09;$db = new DB_local;&#x0D;&#x0A;&#x09;$queryst = &quot;SELECT * FROM $usertable&quot;;&#x0D;&#x0A;&#x09;$result = $db-&gt;query($queryst);&#x0D;&#x0A;&#x09;$number = odbc_num_rows($result);&#x0D;&#x0A;&#x0D;&#x0A;      if( odbc_fetch_row($result, 1) ) {&#x0D;&#x0A;    do {&#x0D;&#x0A;&#x09;$var = odbc_result($result,&quot;$fieldname&quot;);&#x0D;&#x0A;&#x09;print &quot;&lt;option value=&apos;$var&apos;&gt;$var&lt;/option&gt;&lt;br&gt;\n&quot;;&#x0D;&#x0A;    } while ( odbc_fetch_row($result) );&#x0D;&#x0A;      }&#x09;else {&#x0D;&#x0A;&#x09;    print(&quot;No data in the record set&quot;);&#x0D;&#x0A;    }&#x0D;&#x0A;}   &#x0D;&#x0A;</code>
</snippet>
<snippet author="hermawan" date_entered="2002-11-03" last_modified="2002-11-03 16:53:52" name="censormsg" rating="0.00">
<description>This is a simple function which can be used when you have a form for your users to post their message and you want to censor every badwords that they might write on that form. </description>
<code>&lt;?php &#x0D;&#x0A; /*********************************************** &#x0D;&#x0A;  * Snippet Name : censorMsg                    * &#x0D;&#x0A;  * Scripted By  : Hermawan Haryanto            * &#x0D;&#x0A;  * Website      : http://hermawan.dmonster.com * &#x0D;&#x0A;  * Email        : hermawan@dmonster.com        * &#x0D;&#x0A;  * License      : GPL (General Public License) * &#x0D;&#x0A;  ***********************************************/  &#x0D;&#x0A;  $bw = &quot;words|seperated|by|pipe|symbols&quot;; &#x0D;&#x0A;  function str_repeats($input, $mult) { &#x0D;&#x0A;    $ret = &quot;&quot;; &#x0D;&#x0A;    while($mult&gt;0) { &#x0D;&#x0A;      $ret .= $input; &#x0D;&#x0A;      $mult --; &#x0D;&#x0A;    } &#x0D;&#x0A;    return $ret; &#x0D;&#x0A;  } &#x0D;&#x0A;  function censorMsg($msg, $replacement=&quot;*&quot;) { &#x0D;&#x0A;    global $bw; &#x0D;&#x0A;    $badwords = explode(&quot;|&quot;, $bw); &#x0D;&#x0A;    $eachword = explode(&quot; &quot;, $msg); &#x0D;&#x0A;    for($j=0;$j&lt;count($badwords);$j++) { &#x0D;&#x0A;      for($i=0;$i&lt;count($eachword);$i++) { &#x0D;&#x0A;        if(is_int(strpos(strtolower($eachword[$i]), $badwords[$j]))) { &#x0D;&#x0A;          $msg = eregi_replace($eachword[$i], &#x0D;&#x0A;                               str_repeats($replacement, &#x0D;&#x0A;                                           strlen($eachword[$i])), &#x0D;&#x0A;                               stripslashes($msg)); &#x0D;&#x0A;        } &#x0D;&#x0A;      } &#x0D;&#x0A;    } &#x0D;&#x0A;    return $msg; &#x0D;&#x0A;  } &#x0D;&#x0A;  $msg = $_POST[&quot;msg&quot;]; &#x0D;&#x0A;  if (isset($msg)) { &#x0D;&#x0A;    $msg = censorMsg($msg,&quot;*&quot;); &#x0D;&#x0A;    print &quot;Your posted Message :&lt;br&gt;&quot;.$msg; &#x0D;&#x0A;  } &#x0D;&#x0A;?&gt; &#x0D;&#x0A;&lt;form method=&quot;post&quot;&gt; &#x0D;&#x0A;&lt;textarea name=&quot;msg&quot; cols=50 rows=10&gt;&lt;/textarea&gt;&lt;br&gt; &#x0D;&#x0A;&lt;input type=&quot;submit&quot; value=&quot;Censor It&quot;&gt; &#x0D;&#x0A;&lt;/form&gt; &#x0D;&#x0A;</code>
</snippet>
<snippet author="eovidiu" date_entered="2000-11-03" last_modified="2001-01-28 19:07:37" name="Check parameters  validity" rating="2.50">
<description>Paranoia was designed to check the validity of the parameters that a php page will receive after a form submision. It can be used to check the variables sent by POST or GET</description>
<code>&lt;?php&#x0D;&#x0A;/****************************************************************&#x0D;&#x0A;*Author: Ovidiu EFTIMIE&#x0D;&#x0A;*Copyright:Ovidiu EFTIMIE&#x0D;&#x0A;*Last modified:Friday, November 03, 2000 10:43:17 AM&#x0D;&#x0A;*Description : Checks an array to see if it contains invalid chars&#x0D;&#x0A;*****************************************************************/&#x0D;&#x0A;class paranoia{&#x0D;&#x0A;var $wrongParams=false;&#x0D;&#x0A;var $para=array(&quot;~&quot;,&quot;`&quot;,&quot;!&quot;,&quot;@&quot;,&quot;#&quot;,&quot;\$&quot;,&quot;%&quot;,&quot;^&quot;,&quot;&amp;&quot;,&quot;*&quot;,&quot;(&quot;,&quot;)&quot;,&quot;_&quot;,&quot;-&quot;,&quot;+&quot;,&quot;=&quot;,&quot;|&quot;,&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&quot;\\&quot;,&quot;{&quot;,&quot;}&quot;,&quot;:&quot;,&quot;;&quot;,&quot;\&quot;&quot;,&quot;&apos;&quot;,&quot;,&quot;,&quot;&lt;&quot;,&quot;.&quot;,&quot;&gt;&quot;,&quot;?&quot;,&quot;/&quot;);&#x0D;&#x0A;&#x0D;&#x0A;&#x0D;&#x0A;/**************************************************&#x0D;&#x0A;*Class constructor&#x0D;&#x0A;*Params : $paramsArray - the array containing the data to be checked&#x0D;&#x0A;***************************************************/&#x0D;&#x0A;function paranoia($paramsArray){&#x0D;&#x0A;reset($this-&gt;para);&#x0D;&#x0A;$this-&gt;wrongParams=false;&#x0D;&#x0A;while(list($k,$postvars)=each($paramsArray)){&#x0D;&#x0A;&#x09;if(is_array($postvars)){&#x0D;&#x0A;&#x09;&#x09;while(list($r,$postvals)=each($postvars)){&#x0D;&#x0A;&#x09;&#x09;&#x09;while(list(,$val)=each($this-&gt;para)){&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$wrong=strchr($postvals,$val);&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;if(!empty($wrong)){&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09;$this-&gt;wrongParams=true;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;}else{&#x0D;&#x0A;&#x09;&#x09;while(list(,$val)=each($this-&gt;para)){&#x0D;&#x0A;&#x09;&#x09;&#x09;$wrong=strchr($postvars,$val);&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;if(!empty($wrong)){&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$this-&gt;wrongParams=true;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;reset($this-&gt;para);&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;}&#x0D;&#x0A;return $this-&gt;wrongParams;&#x0D;&#x0A;}&#x0D;&#x0A;/*******************************************************&#x0D;&#x0A;*Checks to see the invalid chars&#x0D;&#x0A;********************************************************/&#x0D;&#x0A;function checkParanoia(){&#x0D;&#x0A;echo date(&quot;d M Y H:i:s&quot;,time()).&quot;&lt;br&gt;Checking paranoia chars...&lt;br&gt;&lt;br&gt;&quot;;&#x0D;&#x0A;&#x09;while(list($d,$r)=each($this-&gt;para)){&#x0D;&#x0A;&#x09;&#x09;echo $d.&quot;.&amp;nbsp;&amp;nbsp; &lt;b&gt;&quot;.$r.&quot;&lt;/b&gt;  =  &lt;b&gt;&quot;.ord($r).&quot;&lt;/b&gt;&lt;br&gt;&quot;;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x0D;&#x0A;}&#x0D;&#x0A;/********************************************************&#x0D;&#x0A;*Redirecting function&#x0D;&#x0A;********************************************************/&#x0D;&#x0A;function sendBack(){&#x0D;&#x0A;echo &apos;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body onLoad=&quot;javascript:history.back(-1);&quot;&gt;&lt;/body&gt;&lt;/html&gt;&apos;;&#x0D;&#x0A;}&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;&#x0D;&#x0A;&#x0D;&#x0A;&#x0D;&#x0A;&#x0D;&#x0A;?&gt;</code>
</snippet>
<snippet author="rayray" date_entered="2000-08-02" last_modified="2000-08-29 16:14:26" name="Create dynamic select boxes from a database with this function" rating="3.72">
<description>This function allows you to pass in:&#x0D;&#x0A;&lt;ul&gt;&#x0D;&#x0A;&lt;li&gt;name&#x0D;&#x0A;&lt;li&gt;table&#x0D;&#x0A;&lt;li&gt;SQL statement&#x0D;&#x0A;&lt;li&gt;id&#x0D;&#x0A;&lt;/ul&gt;&#x0D;&#x0A;to generate a select box dynamically. Optionally you can pass in an &lt;b&gt;$id&lt;/b&gt; to have it create a select box with a specific value set as &quot;selected&quot;.</description>
<code>function createSelect ( $Sname, $table, $any = 0, $select_id=&quot;&quot; ) {&#x0D;&#x0A;# $Sname is the name to be applied to the select control.&#x0D;&#x0A;# $table is the name of the table to query.&#x0D;&#x0A;# NOTE: This function assumes you are using a lookup table that has 2 fields (id,name) or you only name those 2 fields in your sql statement.&#x0D;&#x0A;# $any 0=Without the &quot;Any&quot; option, 1=With the &quot;Any&quot; option, this is a NULL value. &#x0D;&#x0A;# $curr_id is used to set the &quot;SELECTED&quot; flag on the select control.&#x0D;&#x0A;&#x0D;&#x0A;&#x09;include(&quot;../etc/global.inc&quot;);&#x0D;&#x0A;&#x09;$dbh =  mysql_connect($host,$user,$pass);&#x0D;&#x0A;&#x09;mysql_select_db($dbname);&#x0D;&#x0A;&#x09;$sql = &quot;SELECT * FROM $table&quot;;&#x0D;&#x0A;&#x09;$results = mysql_query($sql);&#x0D;&#x0A;&#x09;printf(&quot;&lt;select name=\&quot;$Sname\&quot;&gt;\n&quot;);&#x0D;&#x0A;&#x09;if ($any == 1) {&#x0D;&#x0A;&#x09;printf(&quot;&lt;option \&quot;\&quot;&gt;Any\n&quot;);&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;while ($row = mysql_fetch_array($results)):&#x0D;&#x0A;&#x09;&#x09;$id = $row[&quot;id&quot;];&#x0D;&#x0A;&#x09;&#x09;$name = $row[&quot;name&quot;];&#x0D;&#x0A;&#x09;&#x09;if ($id == $select_id) {&#x0D;&#x0A;&#x09;&#x09;&#x09;printf(&quot;&lt;option SELECTED value=\&quot;$id\&quot;&gt;$name\n&quot;);&#x0D;&#x0A;&#x09;&#x09;} else {&#x0D;&#x0A;&#x09;&#x09;&#x09;printf(&quot;&lt;option value=\&quot;$id\&quot;&gt;$name\n&quot;);&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;endwhile;&#x0D;&#x0A;&#x09;printf(&quot;&lt;/select&gt;\n&quot;);&#x0D;&#x0A;}&#x09;</code>
</snippet>
<snippet author="wibi" date_entered="2001-07-05" last_modified="2008-09-11 10:54:38" name="Dir 2 Box" rating="4.67">
<description>This function will read a directory and put the result into a listbox.&#x0D;&#x0A;So you can choose a file from that listbox.</description>
<code>&lt;?&#x0D;&#x0A;/********************************************************************&#x0D;&#x0A;*&#x09;drop-down-menu - form field function.&#x0D;&#x0A;*&#x09;function that read directory content and &#x0D;&#x0A;*&#x09;return the result list as drop-down-menu&#x0D;&#x0A;*   Syntax :&#x0D;&#x0A;*&#x09;&#x09;- string dir2box(string path, string name, string selected-file);&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;Copyright (C) 2001 Wibisono Sastrodiwiryo. &#x0D;&#x0A;*   &#x09;This program is free software licensed under the &#x0D;&#x0A;*   &#x09;GNU General Public License (GPL).&#x0D;&#x0A;*&#x0D;&#x0A;*   CyberGL =&gt; Application Service Provider&#x0D;&#x0A;*   http://www.cybergl.co.id&#x0D;&#x0A;*&#x09;office@cybergl.co.id&#x0D;&#x0A;*&#x0D;&#x0A;*   $Id: dir2box.php3,v 0.1 2001/07/5 19:42:20 wibi Exp $ &#x0D;&#x0A;*********************************************************************/&#x0D;&#x0A;&#x0D;&#x0A;function dir2box($path, $name, $default=&quot;&quot;) {&#x0D;&#x0A;&#x09;$result=&quot;&lt;select name=\&quot;$name\&quot; size=1&gt;\n&quot;;&#x0D;&#x0A;     $handle=opendir(&quot;$path&quot;);&#x0D;&#x0A;     while ($file = readdir($handle)) {&#x0D;&#x0A;&#x09;&#x09;if ($file == $default) {$selected=&quot;selected&quot;;} else {$selected=&quot;&quot;;}&#x0D;&#x0A;&#x09;&#x09;if ($file != &quot;.&quot; and $file !=&quot;..&quot;) {$result.=&quot;&lt;option value=\&quot;$file\&quot; $selected&gt;$file&lt;/option&gt;\n&quot;;}&#x0D;&#x0A;     }&#x0D;&#x0A;     closedir($handle);&#x0D;&#x0A;&#x09;$result.=&quot;&lt;/select&gt;\n&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;?&gt;</code>
</snippet>
<snippet author="idban" date_entered="2000-03-03" last_modified="2000-08-29 16:14:32" name="Drop down list" rating="2.79">
<description>list your database to drop down menu</description>
<code>&lt;?&#x0D;&#x0A;/* list your database to drop down menu&#x0D;&#x0A;this is only sample, just modify it for your onw gewd&#x0D;&#x0A;&#x0D;&#x0A;idban secandri&#x0D;&#x0A;*/&#x0D;&#x0A;&#x0D;&#x0A;$hostname = &quot;127.0.0.1&quot;; &#x09;&#x0D;&#x0A;$username = &quot;username&quot;; &#x09;&#x0D;&#x0A;$password = &quot;password&quot;; &#x09;&#x0D;&#x0A;$usertable = &quot;tabelname&quot;; &#x09;&#x0D;&#x0A;$dbName = &quot;dbname&quot;; &#x09;&#x0D;&#x0A;MYSQL_CONNECT($hostname, $username, $password) OR DIE(&quot;Unable to connect to database&quot;);&#x0D;&#x0A;@mysql_select_db( &quot;$dbName&quot;) or die( &quot;Unable to select database&quot;);&#x0D;&#x0A;?&gt;&#x0D;&#x0A;&lt;?&#x0D;&#x0A;echo &apos;&lt;form&gt;&lt;select name=$colom_name&gt;&apos;;&#x0D;&#x0A;$XX = &quot;data empty!&quot;;&#x0D;&#x0A;&#x0D;&#x0A;$aku = mysql_query(&quot;SELECT * FROM $usertable WHERE colom_name order by colom_name2 DESC&quot;);&#x0D;&#x0A; &#x0D;&#x0A;while ($row  =  mysql_fetch_array($aku))&#x0D;&#x0A;   {&#x0D;&#x0A;        $colom_name=$row[&quot;colom_name&quot;];&#x0D;&#x0A;        $colom_name2=$row[&quot;colom_name2&quot;];&#x0D;&#x0A;&#x0D;&#x0A; echo &quot;&lt;option value=$colom_name&gt;$colom_name2\n&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;&#x0D;&#x0A;if ($colom_name=&quot;&quot;) &#x0D;&#x0A;{&#x0D;&#x0A;print (&quot;$XX&quot;);&#x0D;&#x0A;}&#x0D;&#x0A;echo &quot;&lt;/select&gt;\n&quot;;      &#x0D;&#x0A;echo &quot;&lt;input type=submit value=\&quot;Go..go gadget\&quot;&gt;\n&quot;;&#x0D;&#x0A;&#x0D;&#x0A;print (&quot;&lt;br&gt;&lt;br&gt;&quot;);&#x0D;&#x0A;?&gt;&#x0D;&#x0A;&#x0D;&#x0A;</code>
</snippet>
<snippet author="to21" date_entered="2002-06-07" last_modified="2002-06-11 23:04:50" name="Dynamic dropdown box function" rating="5.00">
<description>This function updates the second box, depending on the selection of first box.&#x0D;&#x0A;Adapted from code by Leon Atkinson.</description>
<code>### this neat javascript function I adapted from Leon Atkinson&apos;s code updates the second dropdown box&#x0D;&#x0A;### (subcategory) depending on what is selected in the first (category).&#x0D;&#x0A;### this function obviously needs to be contained in a form.&#x0D;&#x0A;###&#x0D;&#x0A;### array_key_ID is an array of the unique identifiers of the subcategory&#x0D;&#x0A;### array_cat is the array of categories&#x0D;&#x0A;### array_subcat is the array of the subcategories&#x0D;&#x0A;### num_in_array is the total number of items in the array &#x0D;&#x0A;### distinct_cats is the number of unique items in the category field&#x0D;&#x0A;### MaxItems is the maximum number of items that can occur in the subcategory dropdown box&#x0D;&#x0A;###&#x0D;&#x0A;### Works in IE 4+ and Mozilla 0.9.9+&#x0D;&#x0A;### Not currently working in Opera (6.02) &#x0D;&#x0A;&#x0D;&#x0A;function dynamicboxes ($array_key_ID, $array_cat, $array_subcat, $num_in_array, $distinct_cats, $MaxItems ){&#x0D;&#x0A;&#x0D;&#x0A;&#x09;print &quot;&lt;SCRIPT Language=\&quot;JavaScript\&quot;&gt;\n&quot;;&#x0D;&#x0A;&#x09;print &quot;function UpdateSubCat()\n&quot;;&#x0D;&#x0A;&#x09;print &quot;{\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\tvar SubCat = document.choose_category.subcat.options.length;\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\twhile(SubCat &gt; 0)\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\t{\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\t\tSubCat--;\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\t\tdocument.choose_category.subcat.options[SubCat].text = &apos;&apos;;\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\t\tdocument.choose_category.subcat.options[SubCat].value = &apos;&apos;;\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\t}\n\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\tdocument.choose_category.subcat.options[0].selected = true;\n\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\tvar CatSelected = 0;\n&quot;;&#x0D;&#x0A;&#x09;print &quot;\twhile(document.choose_category.cat.options[CatSelected].selected==false) CatSelected++;\n\n&quot;;&#x0D;&#x0A;&#x0D;&#x0A;&#x09;$StoreCat = &quot;&quot;;&#x0D;&#x0A;&#x09;$SubCatCount = 0;&#x0D;&#x0A;&#x09;$RowCount = 0;&#x0D;&#x0A;&#x0D;&#x0A;&#x09;while($RowCount &lt; $num_in_array)&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;$item_key_ID = $array_key_ID[$RowCount];&#x0D;&#x0A;&#x09;&#x09;$item_Cat = $array_cat[$RowCount];&#x0D;&#x0A;&#x09;&#x09;$item_SubCat = $array_subcat[$RowCount];&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($StoreCat != $item_Cat)&#x0D;&#x0A;&#x09;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;if($StoreCat != &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;print &quot;\t}\n&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;print &quot;\tif(document.choose_category.cat.options[CatSelected].value == &apos;$item_Cat&apos;)\n&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;print &quot;\t{\n&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;print &quot;\t\tdocument.choose_category.subcat.options[0].value = 0;\n&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;print &quot;\t\tdocument.choose_category.subcat.options[0].text = &apos;Choose a subcategory&apos;;\n\n&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09; &#x0D;&#x0A;&#x09;&#x09;&#x09;$StoreCat = $item_Cat;&#x0D;&#x0A;&#x09;&#x09;&#x09;$SubCatCount=1;&#x0D;&#x0A;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;print &quot;\t\tdocument.choose_category.subcat.options[$SubCatCount].value = &apos;$item_key_ID&apos;;\n&quot;;&#x0D;&#x0A;&#x09;&#x09;print &quot;\t\tdocument.choose_category.subcat.options[$SubCatCount].text = &apos;$item_SubCat&apos;;\n\n&quot;;&#x0D;&#x0A;&#x09;&#x09;$SubCatCount++;&#x0D;&#x0A;&#x09;&#x09;$RowCount++;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x0D;&#x0A;&#x09;print &quot;\t}\n&quot;;&#x0D;&#x0A;&#x09;print &quot;}\n&quot;;&#x0D;&#x0A;&#x09;print &quot;&lt;/SCRIPT&gt;\n\n&quot;;&#x0D;&#x0A;&#x09;print &quot;&lt;SELECT NAME=cat onChange=\&quot;UpdateSubCat();\&quot;&gt;\n&quot;;&#x0D;&#x0A;&#x09;print &quot;&lt;OPTION VALUE=0&gt;Choose category&quot;;&#x0D;&#x0A;&#x09;$RowCount = 0;&#x0D;&#x0A;&#x09;while($RowCount &lt; count($distinct_cats))&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;print &quot;&lt;OPTION VALUE=\&quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;print $distinct_cats[$RowCount];&#x0D;&#x0A;&#x09;&#x09;print &quot;\&quot;&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;print $distinct_cats[$RowCount];&#x0D;&#x0A;&#x09;&#x09;print &quot;\n&quot;;&#x0D;&#x0A;&#x09;&#x09;$RowCount++;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x0D;&#x0A;&#x09;print &quot;&lt;/SELECT&gt;\n&quot;;&#x0D;&#x0A;&#x0D;&#x0A;&#x09;print &quot;&lt;BR&gt;&quot;;&#x0D;&#x0A;&#x09;print &quot;&lt;SELECT NAME=subcat &gt;\n&quot;;&#x0D;&#x0A;&#x09;$RowCount = 0;&#x0D;&#x0A;&#x09;while($RowCount &lt;= $MaxItems)&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;print &quot;&lt;OPTION VALUE=$RowCount&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;print &quot;Subcategory\n&quot;;&#x0D;&#x0A;&#x09;&#x09;$RowCount++;&#x0D;&#x0A;&#x09;&#x09;}               &#x0D;&#x0A;&#x09;print &quot;&lt;/SELECT&gt;&quot;;&#x0D;&#x0A;&#x09;print &quot;&lt;SCRIPT Language=\&quot;JavaScript\&quot;&gt;UpdateSubCat();&lt;/SCRIPT&gt;\n&quot;;&#x0D;&#x0A;&#x0D;&#x0A;&#x09;}</code>
</snippet>
<snippet author="sfullman" date_entered="2002-11-27" last_modified="2002-11-27 15:12:30" name="Field Forwarder" rating="4.20">
<description>This function is great for when you have a multi-page form such as an application. This function forwards fields on one page to hidden fields on the next page, and so on.  Very simple to call.  The beauty of it is, it also will handle arrays with multiple dimensions.&#x0D;&#x0A;&#x0D;&#x0A;If you have a field with the same name on the next form, it&apos;s a good rule to call field_forwarder() at the BEGINNING of your form so that when that form is passed, the field (with the same name) will overwrite the previous form.  It&apos;s also good to put field_forwarder() at the top so the final page will have all the fields in the order of the application.&#x0D;&#x0A;&#x0D;&#x0A;This is a recursive function, i.e. it re-calls itself when it encounters form elements that are arrays such as:&#x0D;&#x0A;&#x0D;&#x0A;&#x0D;&#x0A;Finally, if you wish to print out PHP code of the array instead of hidden fields, add this line right before you call field_forwarder():&#x0D;&#x0A;&#x0D;&#x0A;$FFoutputType = &apos;print&apos;;&#x0D;&#x0A;&#x0D;&#x0A;and it will print out, in text form, the values of the fields as php variables -- this is great for storing php code in a database.</description>
<code>&lt;?php&#x0D;&#x0A;function field_forwarder(){&#x0D;&#x0A;    global $_POST, $rEM979, $FFoutputType;&#x0D;&#x0A;    //get the arguments passed&#x0D;&#x0A;    $argList = func_get_args();&#x0D;&#x0A;&#x0D;&#x0A;    //globalize any other set of instructions&#x0D;&#x0A;    if(count($argList)){&#x0D;&#x0A;        eval(&apos;global $&apos; . $argList[count($argList)-1] . &apos;;&apos;);&#x0D;&#x0A;    }&#x0D;&#x0A;    //set the default set of values to convert&#x0D;&#x0A;        if(count($argList)==0){&#x0D;&#x0A;            //if the function is initially passed without parameter we&apos;re looking in $_POST&#x0D;&#x0A;            $argList[0] = &apos;_POST&apos;;&#x0D;&#x0A;            $startValue = $_POST; &#x0D;&#x0A;            if(sizeof($startValue)==0){return false;}&#x0D;&#x0A;        }elseif(count($argList)==1){&#x0D;&#x0A;            eval( &apos;$rEM979[&quot;&apos; . $argList[0] . &apos;&quot;] = $&apos; . $argList[0] . &apos;;&apos;);&#x0D;&#x0A;            $argList[0] = &apos;rEM979&apos;;&#x0D;&#x0A;            $startValue = $rEM979;&#x0D;&#x0A;        }elseif(count($argList)==2){&#x0D;&#x0A;            eval( &apos;$startValue = $&apos; . $argList[1] . &apos;[&quot;&apos; . $argList[0] . &apos;&quot;];&apos;);&#x0D;&#x0A;        }else{&#x0D;&#x0A;            for($e=count($argList)-2;$e&gt;=0;$e--){&#x0D;&#x0A;                $intersperse .= &apos;[&quot;&apos; . $argList[$e] . &apos;&quot;]&apos;;&#x0D;&#x0A;            }&#x0D;&#x0A;            eval( &apos;$startValue = $&apos; . $argList[count($argList)-1]  . $intersperse . &apos;;&apos;);&#x0D;&#x0A;        }&#x0D;&#x0A;&#x0D;&#x0A;        foreach($startValue as $n =&gt; $v){&#x0D;&#x0A;            if(is_array($v)){&#x0D;&#x0A;                //call the function again&#x0D;&#x0A;                $shiftArguments = &apos;&apos;;&#x0D;&#x0A;                for($w=0;$w&lt;=count($argList)-1;$w++){&#x0D;&#x0A;                    $shiftArguments .= &apos;&quot;&apos; . $argList[$w] . &apos;&quot;, &apos;;&#x0D;&#x0A;                }&#x0D;&#x0A;                $shiftArguments = substr($shiftArguments, 0, strlen($shiftArguments)-2);&#x0D;&#x0A;                &#x0D;&#x0A;                eval(&apos;$fieldForwarder .= field_forwarder(&quot;&apos; . $n . &apos;&quot;&apos; . substr(&apos;,&apos;,0,strlen($shiftArguments)) . &apos; &apos; . $shiftArguments . &apos;);&apos;);&#x0D;&#x0A;                            &#x0D;&#x0A;            }else{&#x0D;&#x0A;                //we have an root value finally&#x0D;&#x0A;                if(count($argList)==1){&#x0D;&#x0A;                    //actual output&#x0D;&#x0A;                    flush();&#x0D;&#x0A;                    if($FFoutputType == &apos;print&apos;){&#x0D;&#x0A;                        $fieldForwarder .= &quot;\$$n = &apos;$v&apos;;\n&quot;;&#x0D;&#x0A;                    }else{&#x0D;&#x0A;                        $fieldForwarder .= &quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;$n\&quot; value=\&quot;&quot; . htmlentities(stripslashes($v)) . &quot;\&quot;&gt;\n&quot;;&#x0D;&#x0A;                    }&#x0D;&#x0A;                }elseif(count($argList)&gt;1){&#x0D;&#x0A;                    $indexString = &apos;&apos;;&#x0D;&#x0A;                    for($g=count($argList)-3;$g&gt;=0;$g--){&#x0D;&#x0A;                        $indexString .= &apos;[&apos; . ((!is_numeric($argList[$g]) and $FFoutputType==&apos;print&apos;)?&quot;&apos;&quot;:&apos;&apos;) . &#x0D;&#x0A;                        $argList[$g] . ((!is_numeric($argList[$g]) and $FFoutputType==&apos;print&apos;)?&quot;&apos;&quot;:&apos;&apos;) . &apos;]&apos;;&#x0D;&#x0A;                    }&#x0D;&#x0A;                    $indexString .= &apos;[&apos; . ((!is_numeric($n) and $FFoutputType==&apos;print&apos;)?&quot;&apos;&quot;:&apos;&apos;) . &#x0D;&#x0A;                    $n . ((!is_numeric($n) and $FFoutputType==&apos;print&apos;)?&quot;&apos;&quot;:&apos;&apos;) . &apos;]&apos;;&#x0D;&#x0A;                    //actual output&#x0D;&#x0A;                    flush();&#x0D;&#x0A;                    if($FFoutputType == &apos;print&apos;){&#x0D;&#x0A;                        $fieldForwarder .= &quot;\${$argList[count($argList)-2]}$indexString = &apos;$v&apos;;\n&quot;;&#x0D;&#x0A;                    }else{&#x0D;&#x0A;                        $fieldForwarder .= &quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;{$argList[count($argList)-2]}$indexString\&quot; value=\&quot;&quot; . htmlentities(stripslashes($v)) . &quot;\&quot;&gt;\n&quot;;&#x0D;&#x0A;                    }&#x0D;&#x0A;                }&#x0D;&#x0A;            }       &#x0D;&#x0A;        }&#x0D;&#x0A;return $fieldForwarder;&#x0D;&#x0A;}//end field_forwarder()&#x0D;&#x0A;?&gt;&#x0D;&#x0A;</code>
</snippet>
<snippet author="hubidubi" date_entered="2002-06-11" last_modified="2002-07-31 22:17:27" name="Form Generator" rating="3.00">
<description>Form generator which waits for an array and gives back a full input form.&#x0D;&#x0A;It can process the data (insert, update, delete)&#x0D;&#x0A;Now supports file upload and styles</description>
<code>&lt;?php&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A; *  Form creator&#x0D;&#x0A; *  &#x0D;&#x0A; *  Coded by Hubidubi (hubidubi@freemail.hu)&#x0D;&#x0A; *&#x0D;&#x0A; */&#x0D;&#x0A;&#x0D;&#x0A;class form {&#x0D;&#x0A;    var $items; // array containing the data for the form&#x0D;&#x0A;    var $arrayname; // name of the form array&#x0D;&#x0A;&#x0D;&#x0A;    function form($items=array()) {&#x0D;&#x0A;&#x09;if (!empty($items)) {&#x0D;&#x0A;&#x09;    $this-&gt;items=$items;&#x0D;&#x0A;&#x09;    foreach ($items as $item) {&#x0D;&#x0A;&#x09;&#x09;if ($item[0]==&quot;name&quot;) {&#x0D;&#x0A;&#x09;&#x09;    $this-&gt;arrayname=$item[1]; // getting the table name&#x0D;&#x0A;&#x09;&#x09;    $name=true;&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;    }&#x0D;&#x0A;&#x09;    if (!isset($name)) die(&quot;The form hasn&apos;t got name parameter&quot;);&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;    }&#x0D;&#x0A;&#x0D;&#x0A;    function drawForm() { // drawing the input form &#x0D;&#x0A;&#x09;global $PHP_SELF;&#x0D;&#x0A;&#x0D;&#x0A;&#x09;if (!empty($this-&gt;items)) {&#x0D;&#x0A;&#x0D;&#x0A;&#x09;    foreach ($this-&gt;items as $item) {&#x0D;&#x0A;&#x09;&#x09;if ($item[0]==&quot;file&quot;) $f=1; // Is there file upload?&#x0D;&#x0A;&#x09;&#x09;if ($item[0]==&quot;textstyle&quot;) $textstyle=$item[1];&#x0D;&#x0A;&#x09;&#x09;if ($item[0]==&quot;formstyle&quot;) $formstyle=$item[1];&#x0D;&#x0A;&#x09;&#x09;if ($item[0]==&quot;titlestyle&quot;) $titlestyle=$item[1];&#x0D;&#x0A;&#x09;&#x09;if ($item[0]==&quot;title&quot;) $title=1;&#x0D;&#x0A;&#x09;    }&#x0D;&#x0A;&#x09;    if (!isset($textstyle)) $textstyle=&quot;&quot;;&#x0D;&#x0A;&#x09;    if (!isset($formstyle)) $formstyle=&quot;&quot;;&#x0D;&#x0A;&#x09;    if (!isset($titlestyle)) $titlestyle=$textstyle;&#x0D;&#x0A;&#x0D;&#x0A;&#x09;    if ($f==1) printf(&quot;&lt;form method=\&quot;post\&quot; name=\&quot;%s\&quot; enctype=\&quot;multipart/form-data\&quot; action=%s&gt;&quot;,$this-&gt;arrayname,$PHP_SELF);&#x0D;&#x0A;&#x09;    else printf(&quot;&lt;form method=\&quot;post\&quot; name=\&quot;%s\&quot; action=\&quot;%s\&quot;&gt;&quot;,$this-&gt;arrayname,$PHP_SELF);&#x0D;&#x0A;&#x09;    echo(&quot;&lt;center&gt;&lt;table BORDER=\&quot;0\&quot;&gt;&quot;);&#x0D;&#x0A;&#x09;    foreach ($this-&gt;items as $item) {&#x0D;&#x0A;&#x09;&#x09;if ($item[0]==&quot;title&quot;) {&#x0D;&#x0A;&#x09;&#x09;    // Draw the title&#x09;    &#x0D;&#x0A;&#x09;&#x09;    // with alignment&#x0D;&#x0A;&#x09;&#x09;    if (isset($item[2])) printf(&quot;&lt;thead&gt;&lt;tr&gt;&lt;td align=\&quot;%s\&quot; class=\&quot;%s\&quot; colspan=2&gt;%s&lt;/td&gt;&lt;/tr&gt;&lt;/thead&gt;&quot;,$item[3],$titlestyle,$item[1]);&#x0D;&#x0A;&#x09;&#x09;    // without alignment&#x0D;&#x0A;&#x09;&#x09;    else printf(&quot;&lt;thead&gt;&lt;tr&gt;&lt;td class=\&quot;%s\&quot; colspan=2&gt;%s&lt;/td&gt;&lt;/tr&gt;&lt;/thead&gt;&quot;,$item[1],$titlestyle);&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;    }&#x0D;&#x0A;&#x0D;&#x0A;&#x09;    foreach ($this-&gt;items as $item) { // items of the form&#x09; &#x0D;&#x0A;&#x09;&#x09;switch ($item[0]) {&#x0D;&#x0A;&#x09;&#x09;case &quot;text&quot;: // text form&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;tr&gt;&lt;td class=\&quot;%s\&quot;&gt;$item[1]&lt;/td&gt;&quot;,$textstyle);&#x0D;&#x0A;&#x09;&#x09;    if (!isset($item[2])) printf(&quot;&lt;td&gt;&lt;input type=\&quot;text\&quot; name=\&quot;%s[%s]\&quot; value=\&quot;\&quot; class=\&quot;%s\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&quot;,$this-&gt;arrayname,$item[2],$formstyle);&#x0D;&#x0A;&#x09;&#x09;    else printf(&quot;&lt;td&gt;&lt;input type=\&quot;text\&quot; name=\&quot;%s[%s]\&quot; size=\&quot;%d\&quot; value=\&quot;%s\&quot; class=\&quot;%s\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&quot;,$this-&gt;arrayname,$item[2],$item[3],$item[4],$formstyle);&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;case &quot;password&quot;: // password &#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;tr&gt;&lt;td class=\&quot;%s\&quot;&gt;$item[1]&lt;/td&gt;&quot;,$textstyle);&#x0D;&#x0A;&#x09;&#x09;    if (!isset($item[2])) printf(&quot;&lt;td&gt;&lt;input type=\&quot;password\&quot; name=\&quot;%s[%s]\&quot; value=\&quot;\&quot; class=\&quot;%s\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&quot;,$this-&gt;arrayname,$item[2],$formstyle);&#x0D;&#x0A;&#x09;&#x09;    else printf(&quot;&lt;td&gt;&lt;input type=\&quot;password\&quot; name=\&quot;%s[%s]\&quot; size=\&quot;%d\&quot; value=\&quot;%s\&quot; class=\&quot;%s\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&quot;,$this-&gt;arrayname,$item[2],$item[3],$item[4],$formstyle);&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;case &quot;radio&quot;: // radio button&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;tr&gt;&lt;td class=\&quot;%s\&quot;&gt;$item[1]&lt;/td&gt;&quot;,$textstyle);&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;td class=\&quot;%s\&quot;&gt;&quot;,$textstyle);&#x0D;&#x0A;&#x09;&#x09;    foreach ($item[3] as $key=&gt;$value) {&#x0D;&#x0A;&#x09;&#x09;&#x09;if (isset($item[4]) &amp;&amp; $item[4]==$key) {&#x0D;&#x0A;&#x09;&#x09;&#x09;    printf(&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;%s[%s]\&quot; value=\&quot;%s\&quot; checked class=\&quot;%s\&quot;&gt;%s&lt;br&gt;&quot;,$this-&gt;arrayname,$item[2],$key,$formstyle,$value);&#x0D;&#x0A;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x09;else {&#x0D;&#x0A;&#x09;&#x09;&#x09;    printf(&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;%s[%s]\&quot; value=\&quot;%s\&quot; class=\&quot;%s\&quot;&gt;%s&lt;br&gt;&quot;,$this-&gt;arrayname,$item[2],$key,$formstyle,$value);&#x0D;&#x0A;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;    }&#x0D;&#x0A;&#x09;&#x09;    echo(&quot;&lt;/td&gt;&quot;);&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;case &quot;checkbox&quot;: // checkbox button&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;tr&gt;&lt;td class=\&quot;%s\&quot;&gt;$item[1]&lt;/td&gt;&quot;,$textstyle);&#x0D;&#x0A;&#x09;&#x09;    echo(&quot;&lt;td&gt;&quot;);&#x0D;&#x0A;&#x09;&#x09;    if (isset($item[3])) printf(&quot;&lt;input type=\&quot;checkbox\&quot; name=\&quot;%s[%s]\&quot; value=\&quot;%s\&quot; class=\&quot;%s\&quot; checked&gt;&quot;,$this-&gt;arrayname,$item[2],1,$formstyle);&#x0D;&#x0A;&#x09;&#x09;    else printf(&quot;&lt;input type=\&quot;checkbox\&quot; name=\&quot;%s[%s]\&quot; value=\&quot;%s\&quot; class=\&quot;%s\&quot;&gt;&quot;,$this-&gt;arrayname,$item[2],1,$formstyle);&#x0D;&#x0A;&#x09;&#x09;    echo(&quot;&lt;/td&gt;&quot;);&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;case &quot;select&quot;:&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;tr&gt;&lt;td class=\&quot;%s\&quot;&gt;$item[1]&lt;/td&gt;&quot;,$textstyle);&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;td&gt;&lt;select name=\&quot;%s[%s]\&quot; class=\&quot;%s\&quot;&gt;&quot;,$this-&gt;arrayname,$item[2],$formstyle);&#x0D;&#x0A;&#x09;&#x09;    foreach ($item[3] as $key=&gt;$value) {&#x0D;&#x0A;&#x09;&#x09;&#x09;if (isset($item[4]) &amp;&amp; $item[4]==$key)  // setting default value&#x0D;&#x0A;&#x09;&#x09;&#x09;    printf(&quot;&lt;option value=\&quot;%s\&quot; selected&gt;%s&lt;/option&gt;&quot;,$key,$value);&#x0D;&#x0A;&#x09;&#x09;&#x09;else printf(&quot;&lt;option value=\&quot;%s\&quot;&gt;%s&lt;/option&gt;&quot;,$key,$value);&#x0D;&#x0A;&#x09;&#x09;    }&#x0D;&#x0A;&#x09;&#x09;    echo(&quot;&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;&quot;);&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;case &quot;textarea&quot;: // textarea&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;tr&gt;&lt;td class=\&quot;%s\&quot;&gt;$item[1]&lt;/td&gt;&quot;,$textstyle);&#x0D;&#x0A;&#x09;&#x09;    if (!isset($item[3])) printf(&quot;&lt;td&gt;&lt;textarea name=\&quot;%s[%s]\&quot; class=\&quot;%s\&quot; wrap=\&quot;on\&quot;&gt;&lt;/textarea&gt;&lt;/td&gt;&lt;/tr&gt;&quot;,$this-&gt;arrayname,$item[2],$formstyle);&#x0D;&#x0A;&#x09;&#x09;    else printf(&quot;&lt;td&gt;&lt;textarea name=\&quot;%s[%s]\&quot; class=\&quot;%s\&quot; wrap=\&quot;on\&quot; cols=\&quot;%d\&quot; rows=%d&gt;%s&lt;/textarea&gt;&lt;/td&gt;&lt;/tr&gt;&quot;,$this-&gt;arrayname,$item[2],$formstyle,$item[3],$item[4],$item[5]);&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;case &quot;file&quot;: // file upload field&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;tr&gt;&lt;td class=\&quot;%s\&quot;&gt;$item[1]&lt;/td&gt;&lt;td&gt;&quot;,$textstyle);&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;input type=\&quot;file\&quot; name=\&quot;%s\&quot; size=\&quot;%d\&quot; class=\&quot;%s\&quot;&gt;&quot;,$item[2],$item[3],$formstyle);&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;MAX_FILE_SIZE\&quot; value=\&quot;%d\&quot;&gt;&quot;,$config-&gt;MaxUploadSize);&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;%s[fileupload]\&quot; value=\&quot;%s\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&quot;,$this-&gt;arrayname,$item[2]);&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;case &quot;hidden&quot;: // hidden fields&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;%s[%s]\&quot; value=\&quot;%s\&quot;&gt;&quot;,$this-&gt;arrayname,$item[1],$item[2]);&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;case &quot;submit&quot;: // defining the label for submit button&#x0D;&#x0A;&#x09;&#x09;    $submit=$item[1];&#x0D;&#x0A;&#x09;&#x09;    $submitname=$item[2];&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;case &quot;delete&quot;: // delete button&#x0D;&#x0A;&#x09;&#x09;    $delete=$item[1];&#x0D;&#x0A;&#x09;&#x09;    $deletename=$item[2];&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;    }&#x0D;&#x0A;&#x09;    if (isset($delete)) printf(&quot;&lt;tr&gt;&lt;td colspan=2 class=\&quot;%s\&quot;&gt;&lt;input type=\&quot;checkbox\&quot; name=\&quot;%s\&quot; value=\&quot;1\&quot; class=\&quot;%s\&quot;&gt;%s&lt;/td&gt;&lt;/tr&gt;&quot;,$textstyle,$deletename,$formstyle,$delete); // checkbox for deletion&#x0D;&#x0A;&#x09;    printf(&quot;&lt;tr&gt;&lt;td colspan=2 align=center&gt;&lt;br&gt;&lt;input type=\&quot;submit\&quot; name=\&quot;%s\&quot; value=\&quot;%s\&quot; class=\&quot;%s\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/center&gt;&lt;/form&gt;&quot;,$submitname,$submit,$formstyle);&#x0D;&#x0A;&#x09;} else print(&quot;&lt;br&gt;A form kirajzolásához nincsenek adatok&lt;br&gt;&quot;);&#x0D;&#x0A;    }&#x0D;&#x0A;&#x0D;&#x0A;    /* If is there a file upload, it has got some extra parameter (e.g. file_type). &#x0D;&#x0A;     * These parameter are put here to the main array&#x0D;&#x0A;     */&#x0D;&#x0A;    function preinsert($pairs=array(),$tabla=&quot;&quot;) {&#x0D;&#x0A;&#x09;global $config;&#x0D;&#x0A;&#x0D;&#x0A;&#x09;foreach ($pairs as $key=&gt;$value) {&#x0D;&#x0A;&#x09;    if ($key==&quot;fileupload&quot;) { // special variable containing the prefix of the name of the uploaded file&#x0D;&#x0A;&#x09;&#x09;$name=$value.&quot;_name&quot;;&#x0D;&#x0A;&#x09;&#x09;$size=$value.&quot;_size&quot;;&#x0D;&#x0A;&#x09;&#x09;$type=$value.&quot;_type&quot;;&#x0D;&#x0A;&#x09;&#x09;$path=$value;&#x0D;&#x0A;&#x09;&#x09;global $$name,$$size,$$type,$$path;&#x0D;&#x0A;&#x09;&#x09;if ($$size&gt;$config-&gt;MaxUploadSize) { // checking the size of the uploaded file, you must set $config-&gt;MaxUploadSize&#x0D;&#x0A;&#x09;&#x09;    printf(&quot;The uploaded file is too big. The maximal size is %d byte. &lt;br&gt;Please repeat the upload!&quot;,$config-&gt;MaxUploadSize);&#x0D;&#x0A;&#x09;&#x09;    $this-&gt;drawform();&#x0D;&#x0A;&#x09;&#x09;} else {&#x0D;&#x0A;&#x09;&#x09;    // let&apos;s put the values of the uploaded image to the main array&#x0D;&#x0A;&#x09;&#x09;    $pairs[file_name]=$$name;&#x0D;&#x0A;&#x09;&#x09;    $pairs[file_size]=$$size;&#x0D;&#x0A;&#x09;&#x09;    $pairs[file_type]=$$type;&#x0D;&#x0A;&#x09;&#x09;    $pairs[file_path]=$$path;&#x0D;&#x0A;&#x09;&#x09;    if (!empty($tabla)) $this-&gt;insert($pairs,$tabla); // if you get table name, insert do everything to you&#x0D;&#x0A;&#x09;&#x09;    else return($pairs); // if there&apos;s no table, we return with the finished array&#x0D;&#x0A;&#x09;&#x09;    break;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;    }&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;    }&#x0D;&#x0A;&#x0D;&#x0A;    function insert($pairs,$table) { // method for inserting record to the database&#x0D;&#x0A;&#x09;$SQL=&quot;INSERT INTO $table (&quot;;&#x0D;&#x0A;&#x09;$first=true;&#x0D;&#x0A;&#x09;foreach ($pairs as $key=&gt;$value) {&#x0D;&#x0A;&#x09;    if ($key!=&quot;id&quot; || $key!=&quot;title&quot; || $key!=&quot;submit&quot;) { // everything except record ID,title,submit&#x0D;&#x0A;&#x09;&#x09;if ($first)  {&#x0D;&#x0A;&#x09;&#x09;    $value=&quot;\&quot;&quot;.$value;&#x0D;&#x0A;&#x09;&#x09;    $first=false;&#x0D;&#x0A;&#x09;&#x09;}else {&#x0D;&#x0A;&#x09;&#x09;    $key=&quot;,&quot;.$key;&#x0D;&#x0A;&#x09;&#x09;    $value=&quot;,\&quot;&quot;.$value;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;$fields.=$key;&#x0D;&#x0A;&#x09;&#x09;$values.=$value.&quot;\&quot;&quot;;&#x0D;&#x0A;&#x09;    }&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;$SQL.=$fields.&quot;) VALUES(&quot;.$values.&quot;)&quot;;&#x0D;&#x0A;&#x09;// Your database code here ...&#x0D;&#x0A;    }&#x0D;&#x0A;&#x0D;&#x0A;    function update($pairs,$table) { // method for updating records in the database&#x0D;&#x0A;&#x09;$SQL=&quot;UPDATE $table SET &quot;;&#x0D;&#x0A;&#x09;$first=true;&#x0D;&#x0A;&#x09;foreach ($pairs as $key=&gt;$value) {&#x0D;&#x0A;&#x09;    if ($key!=&quot;id&quot; || $key!=&quot;title&quot; || $key!=&quot;submit&quot;) { // everything except record ID,title,submit&#x0D;&#x0A;&#x09;&#x09;if ($first)  {&#x0D;&#x0A;&#x09;&#x09;    $SQL.=&quot;$key=\&quot;$value\&quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;    $first=false;&#x0D;&#x0A;&#x09;&#x09;}else {&#x0D;&#x0A;&#x09;&#x09;    $SQL.=&quot;,$key=\&quot;$value\&quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;    }&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;$SQL.=&quot; WHERE id=$pairs[id]&quot;;&#x0D;&#x0A;&#x09;// Your database code here ...&#x0D;&#x0A;    }&#x0D;&#x0A;&#x0D;&#x0A;    function delete($id,$table) { // method for deleting record from a table&#x0D;&#x0A;&#x09;$SQL=&quot;DELETE FROM $table WHERE id=$id&quot;;&#x0D;&#x0A;&#x09;$db-&gt;query($SQL);&#x0D;&#x0A;&#x09;// Your database code here ...&#x0D;&#x0A;    }&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;?&gt;&#x0D;&#x0A;</code>
</snippet>
<snippet author="wibi" date_entered="2001-05-20" last_modified="2001-05-27 13:17:45" name="Formage" rating="4.33">
<description>A complete formfield function minus listbox function, you can make textbox, radio button, checkbox, textarea, button and form opening function.&lt;p&gt;&#x0D;&#x0A;You can obtain listbox function from my previous posting  &lt;br&gt;( &lt;b&gt;&lt;a href=&quot;http://www.zend.com/codex.php?id=525&amp;single=1&quot;&gt;another date drop-down-menu &lt;/a&gt; &lt;/b&gt; and &lt;b&gt; &lt;a href=&quot;http://www.zend.com/codex.php?id=540&amp;single=1&quot;&gt;make listbox from array or database-table &lt;/a&gt;&lt;/b&gt;)</description>
<code>&lt;?&#x0D;&#x0A;/********************************************************************&#x0D;&#x0A;*&#x09;drop-down-menu - form field function.&#x0D;&#x0A;*&#x09;6 function which return a drop-down-menu&#x0D;&#x0A;*   Syntax :&#x0D;&#x0A;*&#x09;&#x09;- string textarea (string name, int rows, int cols, string value);&#x0D;&#x0A;*&#x09;&#x09;- string radio (string name, string value, int checked);&#x0D;&#x0A;*&#x09;&#x09;- string checkbox (string name, string value, int checked);&#x0D;&#x0A;*&#x09;&#x09;- string textbox (string type, string name, int size, int maxlength, string value);&#x0D;&#x0A;*&#x09;&#x09;- string button (array button, string name);&#x0D;&#x0A;*&#x09;&#x09;- string form (string action, array hidden, string validate);&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;&#x09;You can add a listbox()-function in my previous posting&#x0D;&#x0A;*&#x09;&#x09;to accomplish this snippet&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;Copyright (C) 2001 Wibisono Sastrodiwiryo. &#x0D;&#x0A;*   &#x09;This program is free software licensed under the &#x0D;&#x0A;*   &#x09;GNU General Public License (GPL).&#x0D;&#x0A;*&#x0D;&#x0A;*   CyberGL =&gt; Application Service Provider&#x0D;&#x0A;*   http://www.cybergl.co.id&#x0D;&#x0A;*&#x09;office@cybergl.co.id&#x0D;&#x0A;*&#x0D;&#x0A;*   $Id: formage.php3,v 0.1 2001/04/25 21:6:31 wibi Exp $ &#x0D;&#x0A;*********************************************************************/&#x0D;&#x0A;&#x0D;&#x0A;function textarea ($name, $rows=0, $cols=0, $value=&quot;&quot;) {&#x0D;&#x0A;&#x09;$result =&quot;&lt;textarea name=\&quot;$name\&quot; cols=\&quot;$cols\&quot; rows=\&quot;$rows\&quot;&gt;&quot;;&#x0D;&#x0A;&#x09;$result.=$value;&#x0D;&#x0A;&#x09;$result.=&quot;&lt;/textarea&gt;&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function radio ($name, $value, $checked=&quot;&quot;) {&#x0D;&#x0A;&#x09;$result =&quot;&lt;input type=radio &quot;;&#x0D;&#x0A;&#x09;$result.=&quot;name=\&quot;$name\&quot; &quot;;&#x0D;&#x0A;&#x09;$result.=&quot;value=\&quot;$value\&quot; &quot;;&#x0D;&#x0A;&#x09;if ($checked) {$result.=&quot;checked&quot;;}&#x0D;&#x0A;&#x09;$result.=&quot;&gt;&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function checkbox ($name, $value, $checked=&quot;&quot;) {&#x0D;&#x0A;&#x09;$result =&quot;&lt;input type=checkbox &quot;;&#x0D;&#x0A;&#x09;$result.=&quot;name=\&quot;$name\&quot; &quot;;&#x0D;&#x0A;&#x09;$result.=&quot;value=\&quot;$value\&quot; &quot;;&#x0D;&#x0A;&#x09;if ($checked) {$result.=&quot;checked&quot;;}&#x0D;&#x0A;&#x09;$result.=&quot;&gt;&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function textbox ($type, $name, $size=0, $maxlength=0, $value=&quot;&quot;) {&#x0D;&#x0A;&#x09;$result =&quot;&lt;input type=\&quot;$type\&quot; &quot;;&#x0D;&#x0A;&#x09;$result.=&quot;name=\&quot;$name\&quot; &quot;;&#x0D;&#x0A;&#x09;$result.=&quot;size=\&quot;$size\&quot; &quot;;&#x0D;&#x0A;&#x09;$result.=&quot;maxlength=\&quot;$maxlength\&quot; &quot;;&#x0D;&#x0A;&#x09;if ($value) {$result.=&quot;value=\&quot;$value\&quot;&quot;;}&#x0D;&#x0A;&#x09;$result.=&quot;&gt;&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function button ($button, $name) {&#x0D;&#x0A;&#x09;while (list($key,$val)=each($button)) {&#x0D;&#x0A;&#x09;&#x09;$result.=&quot;&lt;input type=submit name=\&quot;$name\&quot; value=\&quot;$val\&quot;&gt;\n&quot;;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function form ($action, $hidden=0, $validate=&quot;&quot;) {&#x0D;&#x0A;&#x09;$result=&quot;&lt;form action=\&quot;$action\&quot; method=post &quot;;&#x0D;&#x0A;&#x09;if ($validate) {$result.=&quot;onsubmit=\&quot;return $validate\&quot;&quot;;}&#x0D;&#x0A;&#x09;$result.=&quot;&gt;\n&quot;;&#x0D;&#x0A;&#x09;if ($hidden) {&#x0D;&#x0A;&#x09;&#x09;while (list($key,$val)=each($hidden)) {$result.=&quot;&lt;input type=hidden name=\&quot;$key\&quot; value=\&quot;$val\&quot;&gt;\n&quot;;}&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;?&gt;</code>
</snippet>
<snippet author="riettasolutions" date_entered="2002-09-23" last_modified="2002-09-26 08:32:24" name="FormCollector" rating="0.00">
<description>Over the summer I wrote a utility class to make it easy to pull information from HTML forms and place into databases and do various manipulations on arrays without having to write much special code for each case.  I have used this class library from everything from a member management database to secure credit card updating utility.&#x0D;&#x0A;&#x0D;&#x0A;Key features:&#x0D;&#x0A;1.&#x09;Return array data where field keys match a certain prefix such as CUSTOMER_, CREDITCARD_ (even from HTTP_POST_VARS).&#x0D;&#x0A;2.&#x09;Create MySQL Insert, Update, and basic Create Table statements from associative array data.&#x0D;&#x0A;&#x0D;&#x0A;Note:  There is a lot of code here and it is very useful.  The documentation could definitely be better, but I do not have enough time to document this as well as I would a commercial product for the time being.  The code is intended to be readable and each function should have a ?JavaDoc like? header.  I welcome comments and/or additions to this library class.&#x0D;&#x0A;</description>
<code>&lt;?php&#x0D;&#x0A;/**&#x0D;&#x0A;* Utility Form Data Collector and Array-to-SQL Statement Generator&#x0D;&#x0A;* Version 1.32&#x0D;&#x0A;* Last Updated: 9/23/2002&#x0D;&#x0A;*&#x09;&#x09;9/5/2002&#x0D;&#x0A;*&#x09;&#x09;8/12/2002&#x0D;&#x0A;*&#x0D;&#x0A;* Copyright © 2001-2002 Frank Rietta and Rietta Solutions&#x0D;&#x0A;* &#x0D;&#x0A;*&#x09;LICENSE&#x0D;&#x0A;*&#x09;This software is provided &apos;as-is&apos;, without any express or implied&#x0D;&#x0A;*&#x09;warranty.  In no event will the author(s) be held liable for any damages&#x0D;&#x0A;*&#x09;arising from the use of this software.&#x0D;&#x0A;* &#x0D;&#x0A;*&#x09;Permission is granted to anyone to use this software for any purpose,&#x0D;&#x0A;*&#x09;including commercial applications, and to alter it and redistribute it&#x0D;&#x0A;*&#x09;freely, subject to the following restrictions:&#x0D;&#x0A;* &#x0D;&#x0A;*&#x09;1. The origin of this software must not be misrepresented; you must not&#x0D;&#x0A;*&#x09;claim that you wrote the original software. If you use this software&#x0D;&#x0A;*&#x09;in a product, an acknowledgment in the product documentation would be&#x0D;&#x0A;*&#x09;appreciated but is not required.&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;2. Altered source versions must be plainly marked as such, and must not be&#x0D;&#x0A;*&#x09;misrepresented as being the original software.&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;3. This notice may not be removed or altered from any source distribution.&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;Frank Rietta&#x09;&lt;products@rietta.com&gt;&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;Note: If you are doing a lot of work with MySQL, you might be interested in &#x0D;&#x0A;*&#x09;&#x09;Rietta Solution&apos;s SQL Converter software (www.sqlconverter.com).&#x0D;&#x0A;*&#x09;&#x09;The program takes data from Microsoft Excel and Access and creates SQL&#x0D;&#x0A;*&#x09;&#x09;dump files which can be read into a MySQL database.&#x0D;&#x0A;* ----------------------------------------------------------------------------------&#x0D;&#x0A;*/&#x0D;&#x0A;&#x0D;&#x0A;//----------------------------------------------------------------------------------&#x0D;&#x0A;// Array Manipulation Functions Prototypes/Overview:&#x0D;&#x0A;//----------------------------------------------------------------------------------&#x0D;&#x0A;// extractPrefixElements($SourceArray, $Prefix)&#x0D;&#x0A;//&#x09;Return a new array with elements from $SourceArray that start with the string, $Prefix.&#x0D;&#x0A;//&#x09;If an array element is &quot;CONTACT_NAME&quot; and $Prefix = &quot;CONTACT_&quot; then a new array with&#x0D;&#x0A;//&#x09;&quot;NAME&quot; as a key will be returned.  If no matches for $Prefix are found, FALSE is returned.&#x0D;&#x0A;//&#x0D;&#x0A;// arrayDiff($NewDataArray, $OldDataArray)&#x0D;&#x0A;//&#x09;Return an associative array of elements in NewDataArray which have different values than&#x0D;&#x0A;//&#x09;the same fields in OldDataArray.  Note: Very helpful for generating update statements.&#x0D;&#x0A;//----------------------------------------------------------------------------------&#x0D;&#x0A;// MySQL Functions Prototypes/Overview:&#x0D;&#x0A;//----------------------------------------------------------------------------------&#x0D;&#x0A;// NOTE: MySQL functions automatically mysql_escape all field data.&#x0D;&#x0A;//&#x0D;&#x0A;// createInsertStatement($Prefix, $TableName)&#x0D;&#x0A;//&#x09;Construct a MySQL INSERT statement from HTTP Post data extracting matches for the Prefix.&#x0D;&#x0A;//&#x0D;&#x0A;// array2MySQLInsert($SourceArray, $TableName, $Prefix=&quot;&quot;)&#x0D;&#x0A;//&#x09;Construct a MySQL INSERT statement from an Associative Array.  The optional prefix will&#x0D;&#x0A;//&#x09;pass the array through the extractPrefixElements function.&#x0D;&#x0A;//&#x0D;&#x0A;// array2MySQLCreateTable($SourceArray, $TableName, $DataType=&quot;TEXT&quot;, $Prefix=&quot;&quot;)&#x0D;&#x0A;// &#x09;Construct a MySQL CREATE TABLE statement from an Associative Array.  The optional prefix will&#x0D;&#x0A;//&#x09;pass the array through the extractPrefixElements function.&#x0D;&#x0A;//&#x0D;&#x0A;// array2MySQLUpdateStatement($SourceArray, $Table, $KeyField, $KeyValue, $Prefix=&quot;&quot;)&#x0D;&#x0A;//&#x09;Construct a MySQL Update Table statement from an Associative Array.&#x0D;&#x0A;&#x0D;&#x0A;class FormCollector {&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;// True when in debug mode.&#x0D;&#x0A;&#x09;var $IS_DEBUG;&#x0D;&#x0A;&#x09;var $LAST_ERROR;&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;function getVersion() {&#x0D;&#x0A;&#x09;&#x09;return &quot;1.32&quot;;&#x0D;&#x0A;&#x09;} // end getVersion&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Constructs a new FormCollector Object&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function FormCollector()&#x0D;&#x0A;&#x09;{&#x0D;&#x0A;&#x09;&#x09;$this-&gt;IS_DEBUG = false;&#x0D;&#x0A;&#x09;} // end FormCollector&#x09;&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Return the previous error message&#x0D;&#x0A;&#x09;*/ &#x0D;&#x0A;&#x09;function getLastErrorMessage() {&#x0D;&#x0A;&#x09;&#x09;return $this-&gt;LAST_ERROR;&#x0D;&#x0A;&#x09;} // end getLastErrorMessage&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Set an error message which can be retrieved later.&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function setLastErrorMessage($message) {&#x0D;&#x0A;&#x09;&#x09;$this-&gt;LAST_ERROR = $message;&#x0D;&#x0A;&#x09;} // end setLastErrorMessage&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Take the HTTP_POST_VARS and extract all fields matching the&#x0D;&#x0A;&#x09;*&#x09;prefix to a new associative array.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @param $SourceArray&#x09;The array from which to pull elements.&#x0D;&#x0A;&#x09;* @param $Prefix&#x09;String prefix of which matches will be added to&#x0D;&#x0A;&#x09;*&#x09;&#x09;&#x09;the new array.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @returns An array of matching keys (minus the prefix) or FALSE if no&#x0D;&#x0A;&#x09;*&#x09;&#x09;matches could be found in $SourceArray. &#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function extractPrefixElements($SourceArray, $Prefix) {&#x0D;&#x0A;&#x09;&#x09;$extractArray = false;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($this-&gt;IS_DEBUG) print &quot;&lt;br&gt;extractPrefixElements($SourceArray, $Prefix) executing...&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// Return an error if SourceArray IS NOT an array.&#x0D;&#x0A;&#x09;&#x09;if(is_array($SourceArray) == false) {&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;setLastErrorMessage(&quot;ERROR: SourceArray is not a defined PHP array.&quot;);&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;} // END if(is_array($SourceArray) == false)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// Look at each source array element and if the Prefix is present,&#x0D;&#x0A;&#x09;&#x09;//&#x09;Create an element in the new array with the field name withou&#x0D;&#x0A;&#x09;&#x09;//&#x09;the Prefix.  For example, if $Prefix = &quot;CONTACT_&quot; and &#x0D;&#x0A;&#x09;&#x09;//&#x09;$strKEY = &quot;CONTACT_NAME&quot; then set the new element name to &quot;NAME&quot;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;foreach($SourceArray as $strKEY =&gt; $strVALUE)&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;$keyPrefix = substr($strKEY, 0, strlen($Prefix));&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;if($this-&gt;IS_DEBUG) print &quot;&lt;br&gt;KEY: $strKEY -- Comparing $keyPrefix TO $Prefix&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;if($keyPrefix == $Prefix) {&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$strNewKEY = substr($strKEY, strlen($Prefix));&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;// Place the modified KEY into the new array and assign its&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;//&#x09;value to that of the matched key in the SourceArray&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$extractArray[$strNewKEY] = $strVALUE;&#x0D;&#x0A;&#x09;&#x09;&#x09;} // end prefix matches&#x0D;&#x0A;&#x09;&#x09;} // end foreach&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;return $extractArray;&#x0D;&#x0A;&#x09;} // end extractPrefixElements&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Determine if all of the fields belonging to the prefix meet&#x0D;&#x0A;&#x09;*&#x09;the specified comma seperated requirement list.&#x0D;&#x0A;&#x09;* @returns true OR an array of non-satisfied fields.&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function requiredFieldsSatisfied($FieldPrefix, $RequiredList)&#x0D;&#x0A;&#x09;{&#x0D;&#x0A;&#x09;&#x09;global $HTTP_POST_VARS;&#x0D;&#x0A;&#x09;&#x09;// Split the comma list into an array&#x0D;&#x0A;&#x09;&#x09;$aRequired = explode(&quot;,&quot;, $RequiredList);&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;$fieldArray = $this-&gt;extractPrefixElements($HTTP_POST_VARS, $FieldPrefix);&#x0D;&#x0A;&#x09;&#x09;$strMissing = &quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if(is_array($fieldArray) == false) return &quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;foreach($fieldArray as $strKEY =&gt; $strVALUE) {&#x0D;&#x0A;&#x09;&#x09;&#x09;// See if this field is in the required list&#x0D;&#x0A;&#x09;&#x09;&#x09;foreach($aRequired as $requiredField) {&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$requiredField = trim($requiredField);&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;if(strcasecmp($strKEY, $requiredField) == 0 &amp;&amp; trim($strVALUE) == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09;$strMissing .= &quot;\r\n* $strKEY: This field cannot be left blank.&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;} // end foreach required&#x0D;&#x0A;&#x09;&#x09;} // end foreach&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;return $strMissing;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;} // end requiredFieldsSatisfied&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Determine if any data has been posted to the script.&#x0D;&#x0A;&#x09;* @return true if data is present or false if no data is present.&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function isFormDataAvailable($SourceArray = &quot;&quot;) {&#x0D;&#x0A;&#x09;&#x09;global $HTTP_POST_VARS;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($SourceArray == &quot;&quot;) $SourceArray = $HTTP_POST_VARS;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if (is_array($SourceArray) == false)&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;else {&#x0D;&#x0A;&#x09;&#x09;&#x09;foreach($SourceArray as $strKEY =&gt; $strVALUE)&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;if($strKEY != &quot;&quot;) return true;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;} // end isFormDataAvailable&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;//----------------------------------------------------------------------------------&#x0D;&#x0A;&#x09;// Plain Text and HTML LDIF Table Functions&#x0D;&#x0A;&#x09;//----------------------------------------------------------------------------------&#x09;&#x0D;&#x0A;&#x09;// Example of an LDIF table is:&#x0D;&#x0A;&#x09;//&#x09;ACTOR: James Stewart&#x0D;&#x0A;&#x09;//&#x09;MOVIE: It&apos;s a Wonderful Life&#x0D;&#x0A;&#x09;//&#x09;YEAR: 1947&#x0D;&#x0A;&#x09;//&#x09;DIRECTOR: Frank Capra&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;function array2TextList($SourceArray, $Prefix=&quot;&quot;) {&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;&#x09;// If the post array is not defined, it is an error&#x0D;&#x0A;&#x09;&#x09;if(is_array($SourceArray) == false) {&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;setLastErrorMessage(&quot;ERROR: SourceArray is not a defined PHP array.&quot;);&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;} // END if(is_array($SourceArray) == false)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($Prefix == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x09;$fieldArray = $SourceArray;&#x0D;&#x0A;&#x09;&#x09;else&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;$fieldArray = $this-&gt;extractPrefixElements($SourceArray, $Prefix);&#x0D;&#x0A;&#x09;&#x09;&#x09;if($fieldArray == false) return false;&#x0D;&#x0A;&#x09;&#x09;} // end if($Prefix == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;$strForm = &quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;// Create an LDIF table KEY: VALUE for each element in the fieldArray&#x0D;&#x0A;&#x09;&#x09;foreach($fieldArray as $strKEY =&gt; $strVALUE)&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;$strForm .= &quot;$strKEY: $strVALUE\n&quot;;&#x0D;&#x0A;&#x09;&#x09;} // end foreach&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;return $strForm;&#x0D;&#x0A;&#x09;} // end array2TextList&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;function array2HTMLList($SourceArray, $Prefix=&quot;&quot;)&#x0D;&#x0A;&#x09;{&#x0D;&#x0A;&#x09;&#x09;$strForm = $this-&gt;array2TextList($SourceArray, $Prefix);&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($strForm == false)&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;else&#x0D;&#x0A;&#x09;&#x09;&#x09;return str_replace(&quot;\n&quot;, &quot;&lt;br&gt;&quot;, $strForm);&#x0D;&#x0A;&#x09;} // end array2HTMLList&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Take HTTP-POST vars and create a text version of &#x0D;&#x0A;&#x09;*&#x09;the fields belonging to the specified Prefix.&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function makeTextForm($FieldPrefix)&#x0D;&#x0A;&#x09;{&#x0D;&#x0A;&#x09;&#x09;global $HTTP_POST_VARS;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// If the post array is not defined, it is an error&#x0D;&#x0A;&#x09;&#x09;if(is_array($HTTP_POST_VARS) == false) {&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;setLastErrorMessage(&quot;ERROR: HTTP_POST_VARS array is not defined. Either no form was submited or the PHP track_vars is not enabled.&quot;);&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;} // END if(is_array($HTTP_POST_VARS) == false)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;$fieldArray = $this-&gt;extractPrefixElements($HTTP_POST_VARS, $FieldPrefix);&#x0D;&#x0A;&#x09;&#x09;$strForm = &quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// Create an LDIF table KEY: VALUE for each element in the fieldArray&#x0D;&#x0A;&#x09;&#x09;foreach($fieldArray as $strKEY =&gt; $strVALUE)&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;$strForm .= &quot;$strKEY: $strVALUE\n&quot;;&#x0D;&#x0A;&#x09;&#x09;} // end foreach&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;return $strForm;&#x0D;&#x0A;&#x09;} // end makeTextForm&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Same as makeTextForm except it returns output encoded for HTML&#x0D;&#x0A;&#x09;*&#x09;(aka &lt;br&gt; instead of newlines).&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function makeHTMLForm($FieldPrefix) {&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;&#x09;$strForm = $this-&gt;makeTextForm($FieldPrefix);&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($strForm == false)&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;else&#x0D;&#x0A;&#x09;&#x09;&#x09;return str_replace(&quot;\r\n&quot;, &quot;&lt;br&gt;&quot;, $strForm);&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;} // end makeHTMLForm&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Return fields from NewDataArray that are different from OldDataArray&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function arrayDiff($NewDataArray, $OldDataArray) {&#x0D;&#x0A;&#x09;&#x09;return $this-&gt;arrayDiffHelper( $this-&gt;arrayDiffHelper($NewDataArray, $OldDataArray),&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09;$this-&gt;arrayDiffHelper($OldDataArray, $NewDataArray)&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;       );&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;} // end arrayDiff&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;function arrayDiffHelper($NewDataArray, $OldDataArray) {&#x0D;&#x0A;&#x09;&#x09;$diffData = false;&#x0D;&#x0A;&#x09;&#x09;foreach($NewDataArray as $strKEY =&gt; $strVALUE) {&#x0D;&#x0A;&#x09;&#x09;&#x09;if($strVALUE != $OldDataArray[$strKEY])&#x0D;&#x0A;&#x09;&#x09;&#x09;  &#x09;$diffData[$strKEY] = $strVALUE;&#x0D;&#x0A;&#x09;&#x09;} // end foreach&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;return $diffData;&#x0D;&#x0A;&#x09;} // end arrayDiffHelper&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;//----------------------------------------------------------------------------------&#x0D;&#x0A;&#x09;// Array/MySQL Functions&#x0D;&#x0A;&#x09;//----------------------------------------------------------------------------------&#x09;&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Take posted data, extract the fields with the specified prefix, and&#x0D;&#x0A;&#x09;*&#x09;return a MySQL INSERT statement.&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function createInsertStatement($FieldPrefix, $TableName) {&#x0D;&#x0A;&#x09;&#x09;global $HTTP_POST_VARS;&#x0D;&#x0A;&#x0D;&#x0A;&#x09;&#x09;// If the post array is not defined, it is an error&#x0D;&#x0A;&#x09;&#x09;if(is_array($HTTP_POST_VARS) == false) {&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;setLastErrorMessage(&quot;ERROR: HTTP_POST_VARS array is not defined. Either no form was submited or the PHP track_vars is not enabled.&quot;);&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;} // END if(is_array($HTTP_POST_VARS) == false)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;$fieldArray = $this-&gt;extractPrefixElements($HTTP_POST_VARS, $FieldPrefix);&#x0D;&#x0A;&#x09;&#x09;return $this-&gt;array2MySQLInsert($fieldArray, $TableName);&#x0D;&#x0A;&#x09;} // end createInsertStatement&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Takes an associative array and creates a MySQL insert statement.&#x0D;&#x0A;&#x09;* The array keys become the fields names and the values are escaped.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @param $SourceArray &#x09;Associative Array containing data to be placed in&#x0D;&#x0A;&#x09;*&#x09;&#x09;&#x09;the insert statement.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @param $TableName&#x09;String representing the name of the MySQL table&#x0D;&#x0A;&#x09;*&#x09;&#x09;&#x09;for the insert statement.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @param $Prefix&#x09;(OPTIONAL) A prefix identifying elements to be used.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @return&#x09;&#x09;Returns a MySQL insert statement as a string.&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function array2MySQLInsert($SourceArray, $TableName, $Prefix=&quot;&quot;) {&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;$strInsert = &quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;$strHeaders = &quot;(&quot;;&#x0D;&#x0A;&#x09;&#x09;$strValues = &quot;(&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// If the post array is not defined, it is an error&#x0D;&#x0A;&#x09;&#x09;if(is_array($SourceArray) == false) {&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;setLastErrorMessage(&quot;ERROR: SourceArray is not a defined PHP array.&quot;);&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;} // END if(is_array($SourceArray) == false)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($Prefix == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x09;$fieldArray = $SourceArray;&#x0D;&#x0A;&#x09;&#x09;else&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;$fieldArray = $this-&gt;extractPrefixElements($SourceArray, $Prefix);&#x0D;&#x0A;&#x09;&#x09;&#x09;if($fieldArray == false) return false;&#x0D;&#x0A;&#x09;&#x09;} // end if($Prefix == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// GO through all of the form variables and create a SQL statement&#x0D;&#x0A;&#x09;&#x09;//&#x09;form from the keys and values.  Place back ticks (`) around key names&#x0D;&#x0A;&#x09;&#x09;//&#x09;and escape the data values and place single quotes (&apos;) around them.&#x0D;&#x0A;&#x09;&#x09;foreach($fieldArray as $key =&gt; $value)&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$strHeaders .= &quot;`$key`, &quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$strValues&#x09;.= &quot;&apos;&quot; . mysql_escape_string($value) . &quot;&apos;, &quot;;&#x0D;&#x0A;&#x09;&#x09;} // end foreach&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// Close out the header and values strings and combine then&#x0D;&#x0A;&#x09;&#x09;//&#x09;return a new string as a single insert statement for MySQL.&#x0D;&#x0A;&#x09;&#x09;$strHeaders .= &quot;)&quot;;&#x0D;&#x0A;&#x09;&#x09;$strHeaders = str_replace(&quot;, )&quot;, &quot;)&quot;, $strHeaders);&#x0D;&#x0A;&#x09;&#x09;$strValues .= &quot;)&quot;;&#x0D;&#x0A;&#x09;&#x09;$strValues = str_replace(&quot;, )&quot;, &quot;)&quot;, $strValues);&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;return &quot;INSERT INTO $TableName $strHeaders VALUES $strValues&quot;;&#x0D;&#x0A;&#x09;} // end associativeArrayToInsertStatement&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Takes an associative array and creates a MySQL Create Table statement.&#x0D;&#x0A;&#x09;* The array keys become the fields names and the values are ignored.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @param $SourceArray &#x09;Associative Array of keys to be turned into MySQL field names&#x0D;&#x0A;&#x09;*&#x09;&#x09;&#x09;for the new table.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @param $TableName&#x09;String representing the name for the new MySQL table.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @param $DataType&#x09;String with the datatype to be used for all fields.&#x0D;&#x0A;&#x09;*&#x09;&#x09;&#x09;The default is TEXT.  Note, this is a simple function&#x0D;&#x0A;&#x09;*&#x09;&#x09;&#x09;so all of the fields will have the same datatype.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @param $Prefix&#x09;(OPTIONAL) A prefix identifying elements to be used.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @return&#x09;&#x09;Returns a MySQL CREATE TABLE statement as a string.&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function array2MySQLCreateTable($SourceArray, $TableName, $DataType=&quot;TEXT&quot;, $Prefix=&quot;&quot;) {&#x0D;&#x0A;&#x09;&#x09;$strHeaders = &quot;(&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// If the post array is not defined, it is an error&#x0D;&#x0A;&#x09;&#x09;if(is_array($SourceArray) == false) {&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;setLastErrorMessage(&quot;ERROR: SourceArray is not a defined PHP array.&quot;);&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;} // END if(is_array($SourceArray) == false)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($Prefix == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x09;$fieldArray = $SourceArray;&#x0D;&#x0A;&#x09;&#x09;else&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;$fieldArray = $this-&gt;extractPrefixElements($SourceArray, $Prefix);&#x0D;&#x0A;&#x09;&#x09;&#x09;if($fieldArray == false) return false;&#x0D;&#x0A;&#x09;&#x09;} // end if($Prefix == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// GO through all of the form variables and create a SQL statement&#x0D;&#x0A;&#x09;&#x09;//&#x09;form from the keys and values.&#x0D;&#x0A;&#x09;&#x09;foreach($fieldArray as $key =&gt; $value)&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$strHeaders .= &quot;`$key` $DataType, &quot;;&#x0D;&#x0A;&#x09;&#x09;} // end foreach&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// Close out the headers&#x0D;&#x0A;&#x09;&#x09;$strHeaders .= &quot;)&quot;;&#x0D;&#x0A;&#x09;&#x09;$strHeaders = str_replace(&quot;, )&quot;, &quot;)&quot;, $strHeaders);&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// Return a single MySQL CREATE TABLE statement&#x0D;&#x0A;&#x09;&#x09;return &quot;CREATE TABLE $TableName $strHeaders&quot;;&#x0D;&#x0A;&#x09;} // end array2MySQLCreateTable&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Create The SET statements for an Update Statement&#x0D;&#x0A;&#x09;* @param SourceArray - associative array of data to be used for updating.&#x0D;&#x0A;&#x09;* @param Prefix - Option prefix to narrow search pattern on fields from within the array.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @return String containing MySQL query info.&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function array2MySQLSetStatment($SourceArray, $Prefix=&quot;&quot;) {&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;&#x09;// If the post array is not defined, it is an error&#x0D;&#x0A;&#x09;&#x09;if(is_array($SourceArray) == false) {&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;setLastErrorMessage(&quot;array2MySQLSetStatment ERROR: SourceArray is not a defined PHP array.&quot;);&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;&#x09;} // END if(is_array($SourceArray) == false)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;$strStatements = &quot;SET &quot;;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($Prefix == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x09;$fieldArray = $SourceArray;&#x0D;&#x0A;&#x09;&#x09;else&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;$fieldArray = $this-&gt;extractPrefixElements($SourceArray, $Prefix);&#x0D;&#x0A;&#x09;&#x09;&#x09;if($fieldArray == false) return false;&#x0D;&#x0A;&#x09;&#x09;} // end if($Prefix == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// GO through all of the form variables and create a SQL statement&#x0D;&#x0A;&#x09;&#x09;//&#x09;form from the keys and values.&#x0D;&#x0A;&#x09;&#x09;foreach($fieldArray as $key =&gt; $value)&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$strStatements .= &quot;`$key`=&apos;&quot; . mysql_escape_string($value) . &quot;&apos;, &quot;;&#x0D;&#x0A;&#x09;&#x09;} // end foreach&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;// Get rid of a trailing comma&#x0D;&#x0A;&#x09;&#x09;$strStatements .= &quot;,,,&quot;;&#x0D;&#x0A;&#x09;&#x09;$strStatements = str_replace(&quot;, ,,,&quot;, &quot;&quot;, $strStatements);&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;return $strStatements;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;} // end array2MySQLSetStatment&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;/**&#x0D;&#x0A;&#x09;* Create a MySQL Update Statement&#x0D;&#x0A;&#x09;* @param SourceArray - associative array of data to be used for updating.&#x0D;&#x0A;&#x09;* @param Table - The name of the table to update.&#x0D;&#x0A;&#x09;* @param KeyField - The name of the primary key (for the WHERE CLAUSE)&#x0D;&#x0A;&#x09;* @param KeyValue - The value of the keyfield to be updated.&#x0D;&#x0A;&#x09;* @param Prefix - Option prefix to narrow search pattern on fields from within the array.&#x0D;&#x0A;&#x09;*&#x0D;&#x0A;&#x09;* @return String containing MYSQL query OR FALSE on error.&#x0D;&#x0A;&#x09;*/&#x0D;&#x0A;&#x09;function array2MySQLUpdateStatement($SourceArray, $Table, $KeyField, $KeyValue, $Prefix=&quot;&quot;) {&#x0D;&#x0A;&#x09;&#x09;$strStatements = $this-&gt;array2MySQLSetStatment($SourceArray, $Prefix);&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($IS_DEBUG) print &quot;&lt;p&gt;DEBUG setStatements = $strStatements&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;if($strStatements != false &amp;&amp; $strStatements != &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x09;return &quot;UPDATE `$Table` $strStatements WHERE `$KeyField`=&apos;$KeyValue&apos;&quot;;&#x0D;&#x0A;&#x09;&#x09;else&#x0D;&#x0A;&#x09;&#x09;&#x09;return false;&#x0D;&#x0A;&#x09;} // end array2MySQLUpdateStatement&#x0D;&#x0A;&#x09;&#x0D;&#x0A;} // End FormCollector Class&#x0D;&#x0A;&#x0D;&#x0A;?&gt;</code>
</snippet>
<snippet author="phpjuggler" date_entered="2002-05-22" last_modified="2004-08-02 22:03:18" name="Formwizard" rating="4.00">
<description>With this little class you can create update or insert forms. It&apos;s so easy and useful</description>
<code>&lt;?php&#x0D;&#x0A;&#x0D;&#x0A;&#x09;    // copyright  ©  2000-2002 ilija injac injac@web.de&#x0D;&#x0A;        // Authors: ilija injac&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;class formwizard&#x0D;&#x0A;&#x09;{&#x0D;&#x0A;&#x09;&#x09;//Members&#x0D;&#x0A;&#x09;&#x09;var $_formFields; &#x09;&#x09;//Variable holding the names of the formfields&#x0D;&#x0A;&#x09;&#x09;var $_formValues; &#x09;&#x09;//Variable holding the values of the fields (for edit forms)&#x0D;&#x0A;&#x09;&#x09;var $_formName;&#x09;  &#x09;&#x09;//Variable holding the name of the form&#x0D;&#x0A;&#x09;&#x09;var $_formAction;&#x09;&#x09;//Variable holding the form action&#x0D;&#x0A;&#x09;&#x09;var $_formMethod;&#x09;&#x09;//Get or Post Form ?&#x0D;&#x0A;&#x09;&#x09;var $_fieldCaptions;&#x09;//The captions for the forms&#x0D;&#x0A;&#x09;&#x09;var $_isInsertForm; &#x09;//is the form a insert form ?&#x0D;&#x0A;&#x09;&#x09;var $_nil;&#x09;&#x09;&#x09;&#x09;//a tempvar&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;//constructor&#x0D;&#x0A;&#x09;&#x09;function formwizard($formFields,$formName,$formAction,$formMethod,$fieldCaptions,$formValues=&quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;//init Members&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_formFields &#x09;&#x09;= $formFields;&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_formName&#x09;&#x09;= $formName;&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_formAction&#x09;&#x09;= $formAction;&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_formMethod  &#x09;= $formMethod;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_fieldCaptions&#x09;= $fieldCaptions;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;//check if edit or add form&#x0D;&#x0A;&#x09;&#x09;&#x09;if($formValues == &quot;&quot;)&#x0D;&#x0A;&#x09;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;//this is a insert form&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$this-&gt;_isInsertForm = true;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;//get the values for the form elements&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$this-&gt;get_insert_form_properties();&#x0D;&#x0A;&#x09;&#x09;&#x09;}else&#x0D;&#x0A;&#x09;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;//this is a edit form&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$this-&gt;_isInsertForm &#x09;= false;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;//insert member for form values&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$this-&gt;_formValues &#x09;&#x09;= $formValues;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;//get the values for the form elements&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$this-&gt;get_edit_form_properties();&#x0D;&#x0A;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;//get values for form fields, if edit form&#x0D;&#x0A;&#x09;&#x09;function get_edit_form_properties()&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;//get the form names&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_nil = explode(&quot;|&quot;,$this-&gt;_formFields);&#x0D;&#x0A;&#x09;&#x09;&#x09;//exchange the value&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_formFields = $this-&gt;_nil;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;//get the form values&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_nil = explode(&quot;|&quot;,$this-&gt;_formValues);&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_formValues = $this-&gt;_nil;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;//get the field captions&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_nil = explode(&quot;|&quot;,$this-&gt;_fieldCaptions);&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_fieldCaptions = $this-&gt;_nil;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;//get field names for form fields, if insert form&#x0D;&#x0A;&#x09;&#x09;function get_insert_form_properties()&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;//get the form names&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_nil = explode(&quot;|&quot;,$this-&gt;_formFields);&#x0D;&#x0A;&#x09;&#x09;&#x09;//exchange the value&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_formFields = $this-&gt;_nil;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;//get the field captions&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_nil = explode(&quot;|&quot;,$this-&gt;_fieldCaptions);&#x0D;&#x0A;&#x09;&#x09;&#x09;$this-&gt;_fieldCaptions = $this-&gt;_nil;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;function print_form()&#x0D;&#x0A;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;echo &quot;&lt;form name=\&quot;$this-&gt;_formName\&quot; method=\&quot;$this-&gt;_formMethod\&quot; action=\&quot;$this-&gt;_formAction\&quot;&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;echo &quot;&lt;table border=0 cellspacing=0 cellpadding=3&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;//check if insert or update form&#x0D;&#x0A;&#x09;&#x09;&#x09;if($this-&gt;_isInsertForm)&#x0D;&#x0A;&#x09;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;//insert form&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;foreach($this-&gt;_formFields as $key =&gt; $value)&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09;echo &quot;&lt;tr&gt;&lt;td&gt;&quot;.$this-&gt;_fieldCaptions[$key].&quot;&lt;/td&gt;&lt;td&gt;&lt;input type=\&quot;text\&quot; name=\&quot;.&quot;.$this-&gt;_formFields[$key].&quot;\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;echo &quot;&lt;tr&gt;&lt;td&gt;&lt;input type=\&quot;submit\&quot; value=\&quot;go\&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=\&quot;reset\&quot; value=\&quot;reset\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;echo &quot;&lt;/table&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;echo &quot;&lt;/form&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;}else&#x0D;&#x0A;&#x09;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;//update form&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;foreach($this-&gt;_formFields as $key =&gt; $value)&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;&#x09;echo &quot;&lt;tr&gt;&lt;td&gt;&quot;.$this-&gt;_fieldCaptions[$key].&quot;&lt;/td&gt;&lt;td&gt;&lt;input type=\&quot;text\&quot; name=\&quot;.&quot;.$this-&gt;_formFields[$key].&quot;\&quot; value=\&quot;&quot;.$this-&gt;_formValues[$key].&quot;\&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;echo &quot;&lt;tr&gt;&lt;td&gt;&lt;input type=\&quot;submit\&quot; value=\&quot;go\&quot;&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;/tr&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;echo &quot;&lt;/table&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;echo &quot;&lt;/form&gt;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;}&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x0D;&#x0A;?&gt;</code>
</snippet>
<snippet author="ADMIN" date_entered="2000-01-12" last_modified="2000-08-29 16:14:22" name="Generate array of radio-buttons" rating="4.25">
<description>This code produces a set of radio-buttons with given name, with values and texts taken from the array</description>
<code>  Function array2radio($arr,$name,$sel = &quot;&quot;) {&#x0D;&#x0A;&#x09;while ( list( $key, $val ) = each($arr)) {&#x0D;&#x0A;&#x09;    if($sel &amp;&amp; $key == $sel) {&#x0D;&#x0A;&#x09;       $select_v=&quot; checked&quot;;&#x0D;&#x0A;&#x09;    } else { &#x0D;&#x0A;&#x09;       $select_v=&quot;&quot;; &#x0D;&#x0A;            }&#x0D;&#x0A;&#x09;    echo &quot;&lt;input type=radio name=\&quot;$name\&quot; value=\&quot;$key\&quot; $select_v&gt; $val\n&quot;;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;  }&#x0D;&#x0A;</code>
</snippet>
<snippet author="ADMIN" date_entered="2000-01-12" last_modified="2000-08-29 16:14:44" name="Generate options array for select" rating="0.00">
<description>This code produces a list of OPTION tags from an array, array keys being option values and array items being option texts. It will also pre-select items from the second argument</description>
<code>  Function array2select($arr,$sel = &quot;&quot;) {&#x0D;&#x0A;&#x09;while ( list( $key, $val ) = each($arr)) {&#x0D;&#x0A;&#x09;    if($sel &amp;&amp; ($key == $sel || is_array($sel) &amp;&amp; in_array($key,$sel))) {&#x0D;&#x0A;&#x09;       $select_v=&quot; selected&quot;;&#x0D;&#x0A;&#x09;    } else { &#x0D;&#x0A;&#x09;       $select_v=&quot;&quot;; &#x0D;&#x0A;            }&#x0D;&#x0A;&#x09;    echo &quot;&lt;option value=\&quot;$key\&quot; $select_v&gt;$val&lt;/option&gt;\n&quot;;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;  }</code>
</snippet>
<snippet author="wibi" date_entered="2001-05-07" last_modified="2001-05-13 01:07:40" name="make listbox from array or database-table" rating="3.00">
<description>This script contain 2 function to make a drop-down-menu from an array and from mysql-database table.</description>
<code>&lt;?&#x0D;&#x0A;/********************************************************************&#x0D;&#x0A;*&#x09;drop-down-menu - form field function.&#x0D;&#x0A;*&#x09;2 function that return a drop-down-menu&#x0D;&#x0A;*   Syntax :&#x0D;&#x0A;*&#x09;&#x09;- string listbox_array(array list, string name, int selected-item);&#x0D;&#x0A;*&#x09;&#x09;&#x09;- list is an array you want to dump into drop-down-menu form-field&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;&#x09;- string listbox_field(int mysql_link, string name, int selected-item);&#x0D;&#x0A;*&#x09;&#x09;&#x09;- mysql_link is a valid mysql_result from QUERY SELECT command&#x0D;&#x0A;*&#x0D;&#x0A;*&#x09;Copyright (C) 2001 Wibisono Sastrodiwiryo. &#x0D;&#x0A;*   &#x09;This program is free software licensed under the &#x0D;&#x0A;*   &#x09;GNU General Public License (GPL).&#x0D;&#x0A;*&#x0D;&#x0A;*   CyberGL =&gt; Application Service Provider&#x0D;&#x0A;*   http://www.cybergl.co.id&#x0D;&#x0A;*&#x09;office@cybergl.co.id&#x0D;&#x0A;*&#x0D;&#x0A;*   $Id: listbox.php3,v 0.1 2001/04/25 21:6:31 wibi Exp $ &#x0D;&#x0A;*********************************************************************/&#x0D;&#x0A;&#x0D;&#x0A;function listbox_array ($list, $name, $default=0, $associative=0) {&#x0D;&#x0A;&#x09;$result=&quot;&lt;select name=\&quot;$name\&quot; size=1&gt;\n&quot;;&#x0D;&#x0A;&#x09;while (list($key, $val) = each($list)) {&#x0D;&#x0A;&#x09;&#x09;if ($associative) {&#x0D;&#x0A;&#x09;&#x09;&#x09;if ($default  == $key) {$selected=&quot;selected&quot;;} else {$selected=&quot;&quot;;}&#x0D;&#x0A;&#x09;&#x09;&#x09;$result.=&quot;&lt;option value=\&quot;$key\&quot; $selected&gt;$val&lt;/option&gt;\n&quot;;&#x0D;&#x0A;&#x09;&#x09;} else {&#x0D;&#x0A;&#x09;&#x09;&#x09;if ($default  == $val) {$selected=&quot;selected&quot;;} else {$selected=&quot;&quot;;}&#x0D;&#x0A;&#x09;&#x09;&#x09;$result.=&quot;&lt;option value=\&quot;$val\&quot; $selected&gt;$val&lt;/option&gt;\n&quot;;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;$result.=&quot;&lt;/select&gt;\n&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;#---listbox_field()-function only work under establish mysql connection&#x0D;&#x0A;&#x0D;&#x0A;function listbox_field ($mysql_link, $name, $default=0) {&#x0D;&#x0A;&#x09;$result=&quot;&lt;select name=\&quot;$name\&quot; size=1&gt;\n&quot;;&#x0D;&#x0A;&#x09;while (list($key,$val)=mysql_fetch_array($mysql_link)) {&#x0D;&#x0A;&#x09;&#x09;if ($default  == $key) {$selected=&quot;selected&quot;;} else {$selected=&quot;&quot;;}&#x0D;&#x0A;&#x09;&#x09;$result.=&quot;&lt;option value=\&quot;$key\&quot; $selected&gt;$val&lt;/option&gt;\n&quot;;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;$result.=&quot;&lt;/select&gt;\n&quot;;&#x0D;&#x0A;return $result;&#x0D;&#x0A;}&#x0D;&#x0A;?&gt;</code>
</snippet>
<snippet author="TooNice" date_entered="2001-03-02" last_modified="2001-03-02 17:08:50" name="On the fly multiple form entry creator" rating="3.33">
<description>This script allows you create a multiple entry form on the fly.&#x0D;&#x0A;The end-user determines how many entries they want and the form&#x0D;&#x0A;is created accordingly.</description>
<code>&lt;!--&#x0D;&#x0A;This is a free script - I hope it helps someone.&#x0D;&#x0A;&#x0D;&#x0A;Keep Open Source Free!&#x0D;&#x0A;&#x0D;&#x0A;This script allows you create a multiple entry form on the fly.&#x0D;&#x0A;The end-user determines how many entries they want and the form&#x0D;&#x0A;is created accordingly.&#x0D;&#x0A;&#x0D;&#x0A;michael gbadebo&#x0D;&#x0A;mailforever@yahoo.com&#x0D;&#x0A;--&gt;&#x0D;&#x0A;&lt;font size=3 color=red&gt;&lt;b&gt;go Create&lt;/b&gt;&lt;/font&gt;&lt;hr&gt;&lt;p&gt;&#x0D;&#x0A;&lt;?php&#x0D;&#x0A;$linenum = 1;&#x0D;&#x0A;?&gt;&#x0D;&#x0A;&#x0D;&#x0A;&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo $ME; ?&gt;&quot;&gt;&#x0D;&#x0A;How many name(s) &#x0D;&#x0A;&lt;input type=text name=cell value=&quot;&quot; size=2 max=2&gt; do you want to register? &#x0D;&#x0A;&lt;input type=hidden name=formname value=&quot;cellform&quot; size=2 max=2&gt;&#x0D;&#x0A;&lt;input type=submit value=&quot;go create!&quot;&gt;&#x0D;&#x0A;&lt;/form&gt;&#x0D;&#x0A;&#x0D;&#x0A;&lt;form method=&quot;post&quot; action=&quot;&lt;?php echo $ME; ?&gt;&quot;&gt;&#x0D;&#x0A;&lt;input type=hidden name=formname value=&quot;inputform&quot; size=2 max=2&gt;&#x0D;&#x0A;&lt;input type=hidden name=passcell value=&quot;&lt;?php echo $cell; ?&gt;&quot;&gt;&#x0D;&#x0A;&lt;table border=1&gt;&#x0D;&#x0A;&#x0D;&#x0A;&lt;?php&#x0D;&#x0A;if ($formname==&quot;cellform&quot;){&#x0D;&#x0A;   if ($cell) {&#x0D;&#x0A;?&gt;&#x0D;&#x0A;&#x0D;&#x0A;&lt;tr&gt;&#x0D;&#x0A;&lt;td&gt;&lt;b&gt;No&lt;/b&lt;/td&gt;&lt;td&gt;&lt;b&gt;First Name&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Last Name&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Nick Name&lt;/b&gt;&lt;/td&gt;&#x0D;&#x0A;&lt;/tr&gt;&#x0D;&#x0A;&#x0D;&#x0A;&lt;?php&#x0D;&#x0A;   while ($linenum &lt;= $cell){&#x0D;&#x0A;   $line = &quot;&lt;tr&gt;&quot;;&#x0D;&#x0A;   $line .= &quot;&lt;td&gt;$linenum&lt;/td&gt;&lt;td&gt;&lt;input type=text name=\&quot;cella$linenum\&quot; value=\&quot;\&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=text name=\&quot;cellb$linenum\&quot; value=\&quot;\&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;input type=text name=\&quot;cellc$linenum\&quot; value=\&quot;\&quot;&gt;&lt;/td&gt;&quot;;&#x0D;&#x0A;   $line .= &quot;&lt;/tr&gt;&quot;;&#x0D;&#x0A;   echo $line;&#x0D;&#x0A;   $linenum = ++$linenum;   &#x0D;&#x0A;   }&#x0D;&#x0A;$cell = $passcell;&#x0D;&#x0A;?&gt;&#x0D;&#x0A;&#x0D;&#x0A;&lt;tr&gt;&lt;td&gt;&amp;nbsp;&lt;/td&gt;&lt;td colspan=3&gt;&lt;input type=submit value=&quot;save my stuff!&quot;&gt;&lt;/td&gt;&lt;/tr&gt;&#x0D;&#x0A;&#x0D;&#x0A;&lt;?php&#x0D;&#x0A;&#x09; }&#x0D;&#x0A;}&#x0D;&#x0A;?&gt;&#x0D;&#x0A;&#x0D;&#x0A;&lt;/table&gt;&#x0D;&#x0A;&lt;/form&gt;&#x0D;&#x0A;&lt;?php&#x0D;&#x0A;if ($formname==&quot;inputform&quot;){&#x0D;&#x0A;?&gt;&#x0D;&#x0A;&lt;table border=1&gt;&#x0D;&#x0A;&lt;tr&gt;&#x0D;&#x0A;&lt;td&gt;&lt;b&gt;No&lt;/b&lt;/td&gt;&lt;td&gt;&lt;b&gt;First Name&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Last Name&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Nick Name&lt;/b&gt;&lt;/td&gt;&#x0D;&#x0A;&lt;/tr&gt;&#x0D;&#x0A;&#x0D;&#x0A;&lt;?php&#x0D;&#x0A;&#x0D;&#x0A;   while ($linenum &lt;= $passcell){&#x0D;&#x0A;&#x0D;&#x0A;   $myumma=&quot;cella&quot;.$linenum;&#x0D;&#x0A;   $myummb=&quot;cellb&quot;.$linenum;&#x0D;&#x0A;   $myummc=&quot;cellc&quot;.$linenum;&#x0D;&#x0A;   echo &quot;&lt;tr&gt;&lt;td&gt;$linenum&lt;/td&gt;&lt;td&gt;&quot;.$$myumma.&quot;&lt;/td&gt;&lt;td&gt;&quot;.$$myummb.&quot;&lt;/td&gt;&lt;td&gt;&quot;.$$myummc.&quot;&lt;/td&gt;&lt;/tr&gt;&quot;;&#x0D;&#x0A;   $linenum = ++$linenum;&#x0D;&#x0A;   }&#x0D;&#x0A;echo &quot;&lt;p&gt;&quot;.$passcell.&quot; name(s) where saved&quot;;&#x0D;&#x0A;?&gt;&#x0D;&#x0A;&lt;/table&gt;&#x0D;&#x0A;&lt;?php } ?&gt;</code>
</snippet>
<snippet author="ralexander" date_entered="2001-03-01" last_modified="2001-03-26 06:33:05" name="Option Generator" rating="4.00">
<description>This function takes three arguments and returns your option code.  All you have to do is provide the form and select code as in the example. ;-]</description>
<code>&lt;?php&#x0D;&#x0A;//FUNCTION TO GENERATE OPTION FROM ARRAY&#x0D;&#x0A;//&#x0D;&#x0A;//The $options variable is an array where the key is the value &#x0D;&#x0A;//of the option and the value is the displayed part of the option.&#x0D;&#x0A;//&#x0D;&#x0A;//The $selected variable is the item you want preselected and must&#x0D;&#x0A;//match the value.&#x0D;&#x0A;//&#x0D;&#x0A;//The $var is the name of the option which will also be your &#x0D;&#x0A;//variable in the script that uses your form data.&#x0D;&#x0A;//&#x0D;&#x0A;//Randall Augustus Alexander&#x0D;&#x0A;//zonezero@zonedzero.net&#x0D;&#x0A;//http://www.zonedzero.net ,.com, .org&#x0D;&#x0A;&#x0D;&#x0A;function make_option($options, $selected = &quot;&quot;, $var)&#x0D;&#x0A;{&#x0D;&#x0A;echo &quot;&lt;SELECT NAME=&apos;$var&apos;&gt;\n&quot;;&#x0D;&#x0A;&#x0D;&#x0A;while (list ($value, $display) = each ($options))&#x0D;&#x0A; &#x09;{&#x0D;&#x0A; &#x09;echo &quot;&lt;OPTION VALUE=&apos;$value&apos; &quot;;&#x0D;&#x0A; &#x09;if ($value == $selected){$select = &quot;SELECTED&quot;;}&#x0D;&#x0A;        else {$select = &quot;&quot;;}&#x0D;&#x0A; &#x09;echo &quot; $select&gt;$display&lt;/OPTION&gt;\n&quot;;&#x0D;&#x0A; &#x09;}&#x0D;&#x0A;&#x0D;&#x0A;echo &quot;&lt;/SELECT&gt;\n&quot;;&#x0D;&#x0A;}?&gt;</code>
</snippet>
<snippet author="jhilgeman" date_entered="2001-04-24" last_modified="2001-04-29 09:19:57" name="PassHiddenVars" rating="4.00">
<description>Takes variables posted from the previous page&apos;s form, and converts them to hidden inputs so they can be passed along multiple page forms.</description>
<code>function PassHiddenVars ()&#x0D;&#x0A;{&#x0D;&#x0A;&#x09;// Bring in Posted Vars&#x0D;&#x0A;&#x09;global $HTTP_POST_VARS;&#x0D;&#x0A;&#x09;&#x0D;&#x0A;&#x09;foreach($HTTP_POST_VARS as $InputName =&gt; $InputValue)&#x0D;&#x0A;&#x09;{&#x0D;&#x0A;&#x09;&#x09;$HiddenInputs .= &quot;&lt;INPUT NAME=&apos;$InputName&apos; TYPE=&apos;hidden&apos; VALUE=&apos;$InputValue&apos;&gt;\n&quot;;&#x0D;&#x0A;&#x09;}; &#x0D;&#x0A;&#x09;&#x09;&#x0D;&#x0A;&#x09;return $HiddenInputs;&#x0D;&#x0A;}&#x0D;&#x0A;</code>
</snippet>
<snippet author="Darguz" date_entered="2000-03-15" last_modified="2002-03-30 04:17:33" name="Phorm Jr." rating="4.80">
<description>Form processing program. A trimmed-down version of the popular Phorm script, Phorm Jr. has just email, acknowledgement and text log capabilities, but with the same security and error-handling features of its big brother.</description>
<code>&lt;?&#x0D;&#x0A;/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *&#x0D;&#x0A; *&#x0D;&#x0A; * Copyright (c) 1999 Holotech Enterprises (phorm@holotech.net)&#x0D;&#x0A; *&#x0D;&#x0A; * This is a trimmed-down version of the popular Phorm script, with only&#x0D;&#x0A; * email, acknowledgement and text log functions. The full version of &#x0D;&#x0A; * Phorm is available at http://www.phorm.com/, as well as full&#x0D;&#x0A; * documentation and example files for Phorm Jr.&#x0D;&#x0A; *&#x0D;&#x0A; * You may freely distribute this script as-is and without modifications.&#x0D;&#x0A; * You may use this script freely, and modify it for your own purposes.&#x0D;&#x0A; * There is no charge for this script, but if you like it, I&apos;d be happy to&#x0D;&#x0A; * hear about it at phormjr@phorm.com.&#x0D;&#x0A; *&#x0D;&#x0A; * I hope you find this program useful. Aloha.&#x0D;&#x0A; *                                                 Alan Little&#x0D;&#x0A; *                                                 March 2002&#x0D;&#x0A; *&#x0D;&#x0A; * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */&#x0D;&#x0A;&#x0D;&#x0A;  function VarSub(&amp;$ph_string) {&#x0D;&#x0A;    $ph_pstring = $ph_string;&#x0D;&#x0A;    while (ereg(&quot;\\{\\{([^}]*)\\}\\}&quot;, $ph_pstring, $ph_regs)) {&#x0D;&#x0A;      $ph_pstring = str_replace($ph_regs[0], &quot;&quot;, $ph_pstring);&#x0D;&#x0A;      $ph_SubVar = $ph_regs[1];&#x0D;&#x0A;&#x0D;&#x0A;//    If $$ph_SubVar is an array, break it down&#x0D;&#x0A;      ereg(&quot;^([A-Za-z0-9_]*)((\[[A-Za-z0-9_]*\])*)$&quot;, $ph_SubVar, $ph_regs2);&#x0D;&#x0A;      $ph_SubVar = $ph_regs2[1];&#x0D;&#x0A;      global $$ph_SubVar;&#x0D;&#x0A;&#x0D;&#x0A;      $ph_indices = split(&quot;\]\[&quot;, ereg_replace(&quot;^\[|\]$&quot;, &quot;&quot;, $ph_regs2[2]));&#x0D;&#x0A;      $ph_SubVal = $$ph_SubVar; $ph_idx = 0;&#x0D;&#x0A;      while (is_array($ph_SubVal))&#x0D;&#x0A;        $ph_SubVal = $ph_SubVal[$ph_indices[$ph_idx++]];&#x0D;&#x0A;&#x0D;&#x0A;      $ph_string = str_replace($ph_regs[0], $ph_SubVal, $ph_string);&#x0D;&#x0A;    }&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;  if (!isset($ph_ForceDec)) $ph_ForceDec = true;&#x0D;&#x0A;/*&#x0D;&#x0A;  Unset any ph_ variables to prevent anyone from trying to sneak something in */&#x0D;&#x0A;  while (list($ph_var, $ph_val) = each($GLOBALS))&#x0D;&#x0A;    if (ereg(&quot;^ph_&quot;, $ph_var) &amp;&amp; !ereg(&quot;^ph_ForceDec$&quot;, $ph_var)) {&#x0D;&#x0A;      unset($$ph_var);&#x0D;&#x0A;      unset($ph_var);&#x0D;&#x0A;    }&#x0D;&#x0A;  reset($GLOBALS);&#x0D;&#x0A;&#x0D;&#x0A;  define(&quot;ph_DECLARE&quot;, &quot;{{FORM}}&quot;);&#x0D;&#x0A;&#x0D;&#x0A;  $ph_Home = &quot;.&quot;;&#x0D;&#x0A;&#x0D;&#x0A;  $ph_Vers = &quot;Phorm Jr. v2.0&quot;;&#x0D;&#x0A;&#x0D;&#x0A;  $ph_HTLink =&#x0D;&#x0A;    &quot;&lt;BR&gt;&lt;BR&gt;&lt;CENTER&gt;&lt;FONT SIZE=1&gt;&quot;.&#x0D;&#x0A;    &quot;&lt;A HREF=\&quot;http://www.phorm.com/\&quot;&gt;$ph_Vers&lt;/A&gt;&quot;.&#x0D;&#x0A;    &quot;&lt;/FONT&gt;&lt;/CENTER&gt;&quot;;&#x0D;&#x0A;&#x0D;&#x0A;  $ph_HTTag =&#x0D;&#x0A;    &quot;\n\n\n\n--\n$ph_Vers by Holotech Enterprises http://www.holotech.net/&quot;;&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Just to be sure */&#x0D;&#x0A;  $HTTP_REFERER = getenv(&quot;HTTP_REFERER&quot;);&#x0D;&#x0A;  $REMOTE_ADDR  = getenv(&quot;REMOTE_ADDR&quot;);&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Record the configuration variables passed from the form, then unset them */&#x0D;&#x0A;  if ($ph_ForceDec) {&#x0D;&#x0A;    while (list($ph_var, $ph_val) = each($GLOBALS))&#x0D;&#x0A;      if (ereg(&quot;^PHORM_&quot;, $ph_var)) {&#x0D;&#x0A;        $ph_varHold[$ph_var] = $ph_val;&#x0D;&#x0A;        unset($$ph_var);&#x0D;&#x0A;      }&#x0D;&#x0A;  }&#x0D;&#x0A;  reset($GLOBALS);&#x0D;&#x0A;&#x0D;&#x0A;  if (!$PHORM_LOGQUOT) $PHORM_LOGQUOT = &quot;&apos;&quot;;&#x0D;&#x0A;  if (!$PHORM_LDELIM) $PHORM_LDELIM = &quot;\t&quot;;&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Restore $PHORM_NAME and process the configuration file */&#x0D;&#x0A;  $PHORM_NAME = $ph_varHold[&quot;PHORM_NAME&quot;];&#x0D;&#x0A;  $ph_Config = basename($PHORM_NAME).&quot;.phm&quot;;&#x0D;&#x0A;  if ($ph_debug3) echo &quot;&lt;B&gt;NS:&lt;/B&gt; Config file $ph_Config&lt;BR&gt;&quot;;&#x0D;&#x0A;  if (!is_readable($ph_Config)) {&#x0D;&#x0A;    $ph_Errs[&apos;020&apos;] = &quot;### - Unable to open configuration file $ph_Config.&lt;BR&gt;&lt;BR&gt;\n&quot;;&#x0D;&#x0A;    $ph_Abort = true;&#x0D;&#x0A;  }&#x0D;&#x0A;  else {&#x0D;&#x0A;    include (&quot;$ph_Config&quot;);&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Check the Referer */&#x0D;&#x0A;  if ($PHORM_REFERER &amp;&amp; !$ph_Abort) {&#x0D;&#x0A;    if ($ph_debug3) echo &quot;&lt;B&gt;NS:&lt;/B&gt; Referer&lt;BR&gt;&quot;;&#x0D;&#x0A;&#x0D;&#x0A;    ereg(&quot;https?://([^/]*)/([^?]*)&quot;, $HTTP_REFERER, $ph_regs);&#x0D;&#x0A;    $ph_RefHost = $ph_regs[1]; $ph_RefPath = $ph_regs[2];&#x0D;&#x0A;&#x0D;&#x0A;    if (!ereg(&quot;\|$ph_RefHost\|&quot;, $PHORM_REFERER)&#x0D;&#x0A;    &amp;&amp;  !ereg(&quot;\|$ph_RefHost/$ph_RefPath\|&quot;, $PHORM_REFERER)) {&#x0D;&#x0A;      $ph_Errs[&apos;080&apos;] = &#x0D;&#x0A;        &quot;### - Invalid access. This Phorm Jr. installation cannot be accessed from [$HTTP_REFERER].&quot;;&#x0D;&#x0A;      $ph_Abort = true;&#x0D;&#x0A;    }&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Restore only the declared PHORM_ variables from the form */&#x0D;&#x0A;  if ($ph_ForceDec &amp;&amp; is_array($ph_varHold))&#x0D;&#x0A;    while (list($ph_var, $ph_val) = each($ph_varHold))&#x0D;&#x0A;      if ($$ph_var == &quot;{{FORM}}&quot;) $$ph_var = $ph_varHold[$ph_var];&#x0D;&#x0A;&#x0D;&#x0A;/* If there&apos;s no ack template, redirect back to the calling form. Note that&#x0D;&#x0A;   if $HTTP_REFERER is empty, the visitor will get a &quot;302 Found&quot; result&#x0D;&#x0A;   (from Apache, anyway) */&#x0D;&#x0A;  if (!$PHORM_ACK &amp;&amp; !$ph_Abort) {&#x0D;&#x0A;    if (!$HTTP_REFERER) {&#x0D;&#x0A;      $ph_Alerts[060] = &#x0D;&#x0A;        &quot;### - Warning: No ack template specified, and \$HTTP_REFERER &quot;.&#x0D;&#x0A;        &quot;is empty. Visitor received 302 Found status message.\n&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;    Header(&quot;Location:$HTTP_REFERER&quot;);&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Check required fields */&#x0D;&#x0A;  if ($PHORM_REQ &amp;&amp; !$ph_Abort) {&#x0D;&#x0A;    if ($ph_debug3) echo &quot;NS: PHORM_REQ&quot;;&#x0D;&#x0A;     &#x0D;&#x0A;    $ph_ReqVars = explode(&quot; &quot;, $PHORM_REQ);&#x0D;&#x0A;    while (list(,$ph_ReqVar) = each($ph_ReqVars))&#x0D;&#x0A;      if (!$$ph_ReqVar)&#x0D;&#x0A;        $ph_VarList.= &quot;&lt;B&gt;$ph_ReqVar&lt;/B&gt;&lt;BR&gt;&quot;;&#x0D;&#x0A;&#x0D;&#x0A;    if ($ph_VarList) {&#x0D;&#x0A;      $ph_Errs[&apos;REQ&apos;] = &#x0D;&#x0A;        &quot;The following required fields are empty:&lt;BR&gt;$ph_VarList&quot;;&#x0D;&#x0A;      $ph_Abort = true;&#x0D;&#x0A;    }&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Open the acknowledgement template file. */&#x0D;&#x0A;  if ($PHORM_ACK &amp;&amp; !$ph_Abort)  {&#x0D;&#x0A;    if ($ph_debug3) echo &quot;NS: Open Ack Template &lt;B&gt;$PHORM_ACK&lt;/B&gt;.&lt;BR&gt;&quot;;&#x0D;&#x0A;    if (!$ph_af = @fopen($PHORM_ACK,&quot;r&quot;)) {&#x0D;&#x0A;      $ph_Errs[&apos;070&apos;] = &#x0D;&#x0A;        &quot;### - Unable to open acknowledgement template file &lt;B&gt;$PHORM_ACK&lt;/B&gt;.&lt;BR&gt;&lt;BR&gt;\n&quot;;&#x0D;&#x0A;      $ph_Abort = true;&#x0D;&#x0A;    }&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Open the mail template file. */&#x0D;&#x0A;  if ($PHORM_TMPL &amp;&amp; !$ph_Abort)  {&#x0D;&#x0A;    if ($ph_debug3) echo &quot;NS: Open Mail Template &lt;B&gt;$PHORM_TMPL&lt;/B&gt;.&lt;BR&gt;&quot;;&#x0D;&#x0A;    if (!$ph_tf = @fopen($PHORM_TMPL,&quot;r&quot;)) {&#x0D;&#x0A;      $ph_Alerts[&apos;101&apos;] = &quot;### - Unable to open mail template file &lt;B&gt;$PHORM_TMPL&lt;/B&gt;.&lt;BR&gt;&lt;BR&gt;\n&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Open the log file */&#x0D;&#x0A;  if ($PHORM_LOG &amp;&amp; $PHORM_LOGVAR &amp;&amp; !$ph_Abort) {&#x0D;&#x0A;    if ($ph_debug3) echo &quot;&lt;B&gt;NS:&lt;/B&gt; Open Log File &lt;B&gt;$lPHORM_LOG&lt;/B&gt;.&lt;BR&gt;&quot;;&#x0D;&#x0A;    if (!$ph_lf = @fopen($PHORM_LOG, &quot;a&quot;)) {&#x0D;&#x0A;      $ph_Alerts[&apos;080&apos;] = &quot;### - Unable to open the text log file $PHORM_LOG.&quot;;&#x0D;&#x0A;      $PHORM_LOG = &quot;&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Log to text file */&#x0D;&#x0A;  if ($PHORM_LOG &amp;&amp; $PHORM_LOGVAR &amp;&amp; !$ph_Abort) {&#x0D;&#x0A;    if ($ph_debug2) echo &quot;&lt;B&gt;JS:&lt;/B&gt; Log to text file &lt;B&gt;$PHORM_LOG&lt;/B&gt;.&lt;BR&gt;&quot;;&#x0D;&#x0A;    $ph_LogVars = explode(&quot; &quot;, $PHORM_LOGVAR);&#x0D;&#x0A;    $ph_idx = 0;&#x0D;&#x0A;    $ph_LogLine = &quot;&quot;;&#x0D;&#x0A;    while (list(,$ph_LogVar) = each($ph_LogVars)) {&#x0D;&#x0A;      if (ereg(&quot;&apos;&quot;, $ph_LogVar)) $ph_Quote = $PHORM_LOGQUOT; else $ph_Quote = &quot;&quot;;&#x0D;&#x0A;      $ph_LogVar = str_replace(&quot;&apos;&quot;, &quot;&quot;, $ph_LogVar);&#x0D;&#x0A;&#x0D;&#x0A;//    If $$ph_LogVar is an array, break it down&#x0D;&#x0A;      ereg(&quot;^([A-Za-z0-9_]*)((\[[A-Za-z0-9_]*\])*)$&quot;, $ph_LogVar, $ph_regs);&#x0D;&#x0A;      $ph_LogVar = $ph_regs[1];&#x0D;&#x0A;      $ph_indices = split(&quot;\]\[&quot;, ereg_replace(&quot;^\[|\]$&quot;, &quot;&quot;, $ph_regs[2]));&#x0D;&#x0A;      $ph_Value = $$ph_LogVar; $ph_idx = 0;&#x0D;&#x0A;      while (is_array($ph_Value))&#x0D;&#x0A;        $ph_Value = $ph_Value[$ph_indices[$ph_idx++]];&#x0D;&#x0A;&#x0D;&#x0A;      $ph_LogLine.= $ph_Quote.$ph_Value.$ph_Quote.$PHORM_LDELIM;&#x0D;&#x0A;    }&#x0D;&#x0A;    fputs($ph_lf, $ph_LogLine.&quot;\n&quot;);&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Read the mail template file and mail it to the user */&#x0D;&#x0A;  if ($ph_tf &amp;&amp; !$ph_Abort) {&#x0D;&#x0A;    if ($ph_debug2) echo &quot;&lt;B&gt;JS:&lt;/B&gt; Mail Template &lt;B&gt;$PHORM_TMPL&lt;/B&gt;&lt;BR&gt;&quot;;&#x0D;&#x0A;    if (!$PHORM_FROM) $PHORM_FROM = $PHORM_TO;&#x0D;&#x0A;    $ph_Message = &quot;&quot;;&#x0D;&#x0A;&#x0D;&#x0A;    while(!feof($ph_tf)) {&#x0D;&#x0A;      $ph_tline = fgets($ph_tf, 1024);&#x0D;&#x0A;&#x0D;&#x0A;//    Parse the line for variable replacements.&#x0D;&#x0A;      VarSub($ph_tline);&#x0D;&#x0A;&#x0D;&#x0A;      $ph_Message.= $ph_tline;&#x0D;&#x0A;    } // (!feof($ph_tf))&#x0D;&#x0A;    $ph_Message.= $ph_HTTag;&#x0D;&#x0A;    fclose($ph_tf);&#x0D;&#x0A;&#x0D;&#x0A;    $ph_Headers = &quot;From: $PHORM_FROM\r\n&quot;.&#x0D;&#x0A;                  &quot;X-Mailer: PHP3/$ph_Vers\r\n&quot;;&#x0D;&#x0A;    Mail($PHORM_TO,&#x0D;&#x0A;         $PHORM_SUBJECT,&#x0D;&#x0A;         $ph_Message,&#x0D;&#x0A;         $ph_Headers);&#x0D;&#x0A;&#x0D;&#x0A;  } // if ($ph_tf)&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Read the ack template and output it. */&#x0D;&#x0A;  if ($ph_af &amp;&amp; !$ph_Abort)  {&#x0D;&#x0A;    if ($ph_debug2) echo &quot;&lt;B&gt;JS:&lt;/B&gt; Ack Template &lt;B&gt;$PHORM_ACK&lt;/B&gt;&lt;BR&gt;&quot;;&#x0D;&#x0A;    while(!feof($ph_af)) {&#x0D;&#x0A;      $ph_aline = fgets($ph_af, 1024);&#x0D;&#x0A;&#x0D;&#x0A;//    Add our tag at the end of the file.&#x0D;&#x0A;      if ((ereg(&quot;&lt;/BODY&gt;&quot;, $ph_aline) || feof($ph_af)) &amp;&amp; !$ph_tagd) {&#x0D;&#x0A;        echo $ph_HTLink; echo &quot;&lt;!-- Generated by Phorm --&gt;&quot;; $ph_tagd=true; }&#x0D;&#x0A;&#x0D;&#x0A;//    Parse the line for variable replacements.&#x0D;&#x0A;      VarSub($ph_aline);&#x0D;&#x0A;&#x0D;&#x0A;      echo $ph_aline;&#x0D;&#x0A;    } // (!feof($ph_af))&#x0D;&#x0A;    fclose($ph_af);&#x0D;&#x0A;  } // (PHORM_ACK)&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Display any fatal error messages to the visitor. Display internal alerts, if PHORM_ALERTTO is&#x0D;&#x0A;  not defined. */&#x0D;&#x0A;  $ph_section = &quot;errors&quot;;&#x0D;&#x0A;  if ($ph_Errs || ($ph_Alerts &amp;&amp; ($ph_debug1 || !$PHORM_ALERTTO))) {&#x0D;&#x0A;    unset($ph_Redirect);&#x0D;&#x0A;    if (is_array($ph_Errs)) {&#x0D;&#x0A;      while (list($ph_errno, $ph_err) = each($ph_Errs)) {&#x0D;&#x0A;        $ph_err = str_replace(&quot;###&quot;, $ph_errno, $ph_err);&#x0D;&#x0A;        $ph_errs.= &quot;$ph_err&lt;BR&gt;\n&quot;;&#x0D;&#x0A;      }&#x0D;&#x0A;      reset($ph_Errs);&#x0D;&#x0A;    }&#x0D;&#x0A;    if (is_array($ph_Alerts)) {&#x0D;&#x0A;      while (list($ph_alertno, $ph_alert) = each($ph_Alerts)) {&#x0D;&#x0A;        $ph_alert = str_replace(&quot;###&quot;, $ph_alertno, $ph_alert);&#x0D;&#x0A;        $ph_alerts.= &quot;$ph_alert&lt;BR&gt;\n&quot;;&#x0D;&#x0A;      }&#x0D;&#x0A;      reset($ph_Alerts);&#x0D;&#x0A;    }&#x0D;&#x0A;    if ($ph_errs) $ph_errmsg = &quot;&lt;B&gt;Errors:&lt;/B&gt;&lt;BR&gt;\n$ph_errs\n&lt;BR&gt;&lt;BR&gt;\n&quot;;&#x0D;&#x0A;    if ($ph_alerts) $ph_errmsg.= &quot;&lt;B&gt;Alerts:&lt;/B&gt;&lt;BR&gt;\n$ph_alerts\n&quot;;&#x0D;&#x0A;    $ph_ErrPage = $PHORM_NAME.&quot;_err.html&quot;;&#x0D;&#x0A;    if (is_file($ph_ErrPage)) {&#x0D;&#x0A;      $ph_errpage = implode(&quot;&quot;, file(&quot;$ph_ErrPage&quot;));&#x0D;&#x0A;      $ph_errpage = str_replace(&quot;&lt;!-- Phorm Messages --&gt;&quot;, $ph_errmsg, $ph_errpage);&#x0D;&#x0A;      echo $ph_errpage;&#x0D;&#x0A;    }&#x0D;&#x0A;    else {&#x0D;&#x0A;      echo &quot;&lt;HMTL&gt;\n&quot;.&#x0D;&#x0A;           &quot;&lt;HEAD&gt;\n&quot;.&#x0D;&#x0A;           &quot;&lt;TITLE&gt;Phorm Error&lt;/TITLE&gt;\n&quot;.&#x0D;&#x0A;           &quot;&lt;/HEAD&gt;\n&quot;.&#x0D;&#x0A;           &quot;&lt;BODY BGCOLOR=#FFC0C0 TEXT=#800000&gt;\n&quot;.&#x0D;&#x0A;           &quot;\n&quot;;&#x0D;&#x0A;      if ($ph_Errs) echo &quot;&lt;FONT SIZE=5&gt;ERROR&lt;BR&gt;&lt;BR&gt;&lt;/FONT&gt;\n&quot;.&#x0D;&#x0A;                         &quot;$ph_errs\n&quot;;&#x0D;&#x0A;      if ($ph_alerts &amp;&amp; ($ph_debug1 || !$PHORM_ALERTTO)) {&#x0D;&#x0A;        echo &quot;Alerts:&lt;BR&gt; $ph_alerts&quot;;&#x0D;&#x0A;      }&#x0D;&#x0A;      echo &quot;$ph_HTLink\n&quot;.&#x0D;&#x0A;           &quot;&lt;/BODY&gt;&lt;/HTML&gt;&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;  }&#x0D;&#x0A;&#x0D;&#x0A;/*&#x0D;&#x0A;  Email any alerts and errors to the user, if an address was specified. */&#x0D;&#x0A;  if (($ph_Alerts || $ph_Errs) &amp;&amp; $PHORM_ALERTTO) {&#x0D;&#x0A;    $ph_Message = &quot;&quot;;&#x0D;&#x0A;    $ph_errs = &quot;&quot;; $ph_alerts = &quot;&quot;;&#x0D;&#x0A;    if (is_array($ph_Errs)) {&#x0D;&#x0A;      while (list($ph_errno, $ph_err) = each($ph_Errs)) {&#x0D;&#x0A;        $ph_err = str_replace(&quot;###&quot;, $ph_errno, $ph_err);&#x0D;&#x0A;        $ph_errs.= &quot;$ph_err\n&quot;;&#x0D;&#x0A;      }&#x0D;&#x0A;    }&#x0D;&#x0A;    if (is_array($ph_Alerts)) {&#x0D;&#x0A;      while (list($ph_alertno, $ph_alert) = each($ph_Alerts)) {&#x0D;&#x0A;        $ph_alert = str_replace(&quot;###&quot;, $ph_alertno, $ph_alert);&#x0D;&#x0A;        $ph_alerts.= &quot;$ph_alert\n&quot;;&#x0D;&#x0A;      }&#x0D;&#x0A;    }&#x0D;&#x0A;    $ph_errs   = ereg_replace(&quot;&lt;[^&gt;]*&gt;&quot;, &quot;&quot;, $ph_errs);&#x0D;&#x0A;    $ph_alerts = ereg_replace(&quot;&lt;[^&gt;]*&gt;&quot;, &quot;&quot;, $ph_alerts);&#x0D;&#x0A;&#x0D;&#x0A;    if ($ph_errs) $ph_Message = &quot;Fatal errors displayed to visitor:\n$ph_errs\n\n&quot;;&#x0D;&#x0A;    if ($ph_alerts) $ph_Message.= &quot;Internal Alerts:\n$ph_alerts\n&quot;;&#x0D;&#x0A;&#x0D;&#x0A;    $ph_Message.= &quot;Phorm Variables:\n&quot;;&#x0D;&#x0A;    while (list($ph_key, $ph_val) = each($GLOBALS)) {&#x0D;&#x0A;      if (ereg(&quot;^PHORM_&quot;, $ph_key)) {&#x0D;&#x0A;        $ph_Message.= &quot;$ph_key: $ph_val\n&quot;;&#x0D;&#x0A;      }&#x0D;&#x0A;    }&#x0D;&#x0A;    reset($GLOBALS);&#x0D;&#x0A;    $ph_Message.= &quot;\nHTTP_REFERER: $HTTP_REFERER\nREMOTE_ADDR: $REMOTE_ADDR\n&quot;;&#x0D;&#x0A;    $ph_Message.= $ph_HTTag;&#x0D;&#x0A;    if (!$PHORM_ALERTFRM) $PHORM_ALERTFRM = &quot;Phorm Processor &lt;Phorm.Processor&gt;&quot;;&#x0D;&#x0A;    $ph_Headers = &quot;From: $PHORM_ALERTFRM\r\n&quot;.&#x0D;&#x0A;                  &quot;X-Mailer: PHP3/$ph_Vers\r\n&quot;;&#x0D;&#x0A;    Mail($PHORM_ALERTTO,&#x0D;&#x0A;         &quot;Phorm Alert&quot;,&#x0D;&#x0A;         $ph_Message,&#x0D;&#x0A;         $ph_Headers);&#x0D;&#x0A;  }&#x0D;&#x0A;/*&#x0D;&#x0A;  Phorm Jr. configuration variables. For more detail, see the full &#x0D;&#x0A;  documentation available at http://www.phorm.com/&#x0D;&#x0A;&#x0D;&#x0A;  $PHORM_NAME:    The name of the form. Phorm Jr. appends .phm to this, and&#x0D;&#x0A;                  looks for a configuration file of that name.&#x0D;&#x0A;  $PHORM_REFERER: A list of valid referers for your Phorm Jr. installation.&#x0D;&#x0A;  $PHORM_ALERTTO: Email address to send internal error messages to, such as&#x0D;&#x0A;                  unable to open the log file or database. If it is not&#x0D;&#x0A;                  specified, all error messages will be displayed to the&#x0D;&#x0A;                  visitor. If it is specified, only errors which affect the&#x0D;&#x0A;                  visitor&apos;s operation will be displayed.&#x0D;&#x0A;  $PHORM_ACK:     An HTML file, containing variable substitutions, to output&#x0D;&#x0A;                  to the user after form submission. If unspecified, no ack&#x0D;&#x0A;                  is displayed, and Phorm Jr. attempts to redirect the user&#x0D;&#x0A;                  back to the URL of the form.&#x0D;&#x0A;  $PHORM_REQ:     A space-delimited list of all required fields.&#x0D;&#x0A;  $PHORM_TMPL:    Text template file for formatting contents to be emailed to&#x0D;&#x0A;                  user. If not specified, contents are not mailed.&#x0D;&#x0A;  $PHORM_TO:      Email address to send the contents to. It is required if&#x0D;&#x0A;                  PHORM_TMPL is specified.&#x0D;&#x0A;  $PHORM_FROM:    Email address for the FROM field of the emailed contents.&#x0D;&#x0A;                  NOTE: If this is blank, it will be set to the same as &#x0D;&#x0A;                  PHORM_TO.&#x0D;&#x0A;  $PHORM_SUBJECT: Subject field for emailed contents.&#x0D;&#x0A;  $PHORM_LOG:     The name of a text file to log entries to&#x0D;&#x0A;  $PHORM_LOGVAR:  A space-delimited list of variables to log to $PHORM_LOG&#x0D;&#x0A;  $PHORM_LDELIM:  Log delimiter -- a character or string of characters to be&#x0D;&#x0A;                  placed between variable values in the text log. The default &#x0D;&#x0A;                  is a tab character.&#x0D;&#x0A;  $PHORM_LOGQUOT: The character to use to quote values in the text log. The &#x0D;&#x0A;                  default is the &apos; character.&#x0D;&#x0A;*/&#x0D;&#x0A;?&gt;</code>
</snippet>
<snippet author="eddyf" date_entered="2000-03-02" last_modified="2000-08-29 16:14:22" name="Query String Generator" rating="2.75">
<description>Generates a query string from POST&apos;ed form variables.</description>
<code>//////////////////////////////////////////////////////////////&#x0D;&#x0A;// Parameters :&#x0D;&#x0A;//      $tableName: name of table query string is to used on&#x0D;&#x0A;//      $conOrDis : &quot;and&quot; if where clause is conjuctive&#x0D;&#x0A;//                  &quot;or&quot; if where clause is disjunctive&#x0D;&#x0A;function qStrGen($tableName,$conOrDis) {&#x0D;&#x0A;    Global $HTTP_POST_VARS;&#x0D;&#x0A;    $qStr = &quot;select * from $tableName where &quot;;&#x0D;&#x0A;    $count = 0;&#x0D;&#x0A;   &#x0D;&#x0A;    while(list($key,$val) = each($HTTP_POST_VARS)) {&#x0D;&#x0A;&#x0D;&#x0A;        if(!strcmp(&quot;update&quot;,$key) || strstr($key,&quot;Form&quot;)) { //not included in qStr&#x0D;&#x0A;            continue;&#x0D;&#x0A;        }&#x0D;&#x0A;        else if($val) {&#x0D;&#x0A;            if($count) { //check to see if first condition in where clause&#x0D;&#x0A;                $qStr .= &quot; &quot;.$conOrDis.&quot; &quot;;&#x0D;&#x0A;            }&#x0D;&#x0A;            if(strstr($key,&quot;addr&quot;) || !strcmp($key,&quot;fname&quot;) || !strcmp($key,&quot;name&quot;)) { //allow for partial matching&#x0D;&#x0A;                $qStr .= &quot;$key like \&quot;%$val%\&quot;&quot;;&#x0D;&#x0A;            }&#x0D;&#x0A;            else&#x0D;&#x0A;                $qStr .= &quot;$key=\&quot;$val\&quot;&quot;;&#x0D;&#x0A;            ++$count;&#x0D;&#x0A;        }&#x0D;&#x0A;    }&#x0D;&#x0A;   &#x0D;&#x0A;    $qStr .= &quot;;&quot;;&#x0D;&#x0A;&#x0D;&#x0A;    if(!$count){ //empty where clause...set qStr to zero or whatever&#x0D;&#x0A;        $qStr = &quot;0&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;    return($qStr);&#x0D;&#x0A;}</code>
</snippet>
<snippet author="deathray" date_entered="2004-08-06" last_modified="2004-08-10 23:01:38" name="radio button selecter" rating="0.00">
<description>This is a simple way to set and get values from a readio button or drop down box. Less code than other methods.</description>
<code>PHP RADIO BUTTON TRICK:&#x0D;&#x0A;User:&lt;input type=&quot;radio&quot; name=&quot;userlevel&quot; &lt;? If ($userlevel == &quot;User&quot;) { ?&gt;&#x0D;&#x0A;checked &lt;? }?&gt; value=&quot;User&quot;&gt;&#x0D;&#x0A;Admin:&lt;input type=&quot;radio&quot; name=&quot;userlevel&quot; &lt;? If ($userlevel == &quot;Admin&quot;) {&#x0D;&#x0A;?&gt; checked &lt;? }?&gt; value=&quot;Admin&quot;&gt;&#x0D;&#x0A;&#x0D;&#x0A;SAME THING FOR PHP DROP DOWN BOX TRICK:&#x0D;&#x0A;&lt;select size=&quot;1&quot; name=&quot;clientstyleday&quot; value=&quot;&lt;?=$clientstyleday?&gt;&quot;&#x0D;&#x0A;ID=&quot;suf&quot;&gt;&#x0D;&#x0A;&lt;option &lt;?php if ($clientstyleday == &quot;Daily&quot;) { ?&gt; selected&lt;?php }?&gt;&#x0D;&#x0A;value=&quot;Daily&quot;&gt;Daily&lt;/option&gt;&#x0D;&#x0A;&lt;option &lt;?php if ($clientstyleday == &quot;Weekly&quot;) { ?&gt;selected&lt;?php }?&gt;&#x0D;&#x0A;value=&quot;Weekly&quot;&gt;Weekly&lt;/option&gt;&#x0D;&#x0A;&lt;/select&gt;</code>
</snippet>
<snippet author="RLYNCH" date_entered="2000-02-13" last_modified="2000-08-29 16:14:44" name="Required" rating="3.11">
<description>A rudimentary sample of how to require elements of a form to be filled out.</description>
<code>&lt;HTML&gt;&lt;BODY BGCOLOR=FFFFFF&gt;&#x0D;&#x0A;&lt;?php&#x0D;&#x0A;  if (isset($HTTP_POST_VARS)){&#x0D;&#x0A;    while(list($var, $val) = each($HTTP_POST_VARS)){&#x0D;&#x0A;      if (empty($val)){&#x0D;&#x0A;        $bad[$var] = 1;&#x0D;&#x0A;  } } }&#x0D;&#x0A;?&gt;&#x0D;&#x0A;&lt;FORM required.php METHOD=POST&gt;&#x0D;&#x0A;  &lt;?php&#x0D;&#x0A;    if (isset($bad)){&#x0D;&#x0A;      echo &quot;&lt;FONT COLOR=FF0000&gt;All Fields Required&lt;BR&gt;&lt;/FONT&gt;&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;    elseif (isset($HTTP_POST_VARS)){&#x0D;&#x0A;    &#x09;echo &quot;THANK YOU!&lt;BR&gt;&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;  ?&gt;&#x0D;&#x0A;  &lt;?php&#x0D;&#x0A;  &#x09;if (isset($bad[&apos;whatever&apos;])){&#x0D;&#x0A;    &#x09;echo &quot;&lt;FONT COLOR=FF0000&gt;&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;  ?&gt;&#x0D;&#x0A;  Whatever: &lt;INPUT NAME=whatever VALUE=&lt;?php echo isset($whatever) ? $whatever : &apos;&apos;; ?&gt;&gt;&lt;BR&gt;&#x0D;&#x0A;  &lt;?php&#x0D;&#x0A;  &#x09;if (isset($bad[&apos;whatever&apos;])){&#x0D;&#x0A;    &#x09;echo &quot;&lt;/FONT&gt;&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;  ?&gt;&#x0D;&#x0A;  &#x0D;&#x0A;  &lt;?php&#x0D;&#x0A;  &#x09;if (isset($bad[&apos;moreinput&apos;])){&#x0D;&#x0A;    &#x09;echo &quot;&lt;FONT COLOR=FF0000&gt;&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;  ?&gt;&#x0D;&#x0A;  More Input: &lt;INPUT NAME=moreinput VALUE=&lt;?php echo isset($moreinput) ? $moreinput : &apos;&apos;; ?&gt;&gt;&lt;BR&gt;&#x0D;&#x0A;  &lt;?php&#x0D;&#x0A;  &#x09;if (isset($bad[&apos;moreinput&apos;])){&#x0D;&#x0A;    &#x09;echo &quot;&lt;/FONT&gt;&quot;;&#x0D;&#x0A;    }&#x0D;&#x0A;  ?&gt;&#x0D;&#x0A;  &lt;INPUT TYPE=SUBMIT&gt;&#x0D;&#x0A;&lt;/FORM&gt;&#x0D;&#x0A;&lt;/BODY&gt;&lt;/HTML&gt;</code>
</snippet>
<snippet author="Boba" date_entered="2000-03-03" last_modified="2000-08-29 16:14:22" name="Simple HTML controls generator library" rating="4.66">
<description>Allows to generate HTML controls as SELECT, RADIO, CHECKBOX from PHP arrays.</description>
<code>&lt;?php if (!defined (&quot;_STDCTRL_LIB_&quot;)):&#x0D;&#x0A;&#x0D;&#x0A;// =================================== &#x0D;&#x0A;//      Standart HTML controls&#x0D;&#x0A;//         generator library&#x0D;&#x0A;//        Copyleft Softerra LLC &#x0D;&#x0A;//          www.softerra.com&#x0D;&#x0A;//      Author: bobd@softerra.com&#x0D;&#x0A;// ===================================&#x0D;&#x0A;//           Version 1.1&#x0D;&#x0A;// ===================================&#x0D;&#x0A;//  --------------------------------&#x0D;&#x0A;//  ------ Declared functions ------&#x0D;&#x0A;//  --------------------------------&#x0D;&#x0A;//&#x0D;&#x0A;//  makeOptionsFromSimpleArray ($array, $selectedItems=false)&#x0D;&#x0A;//  makeOptionsFromArray ($array, $valueField, $textField, $selectedItems=false)&#x0D;&#x0A;//  makeOptionsFromHashArray ($array, $selectedItems=false, $reverse=false)&#x0D;&#x0A;//  makeRadioFromArray ($ctrlName, $array, $checkedIndex=false)&#x0D;&#x0A;//  makeCheckboxesFromArray ($ctrlName, $array, $checkedItems=false)&#x0D;&#x0A;// &#x0D;&#x0A;//  --------------------------------&#x0D;&#x0A;// ==================================&#x0D;&#x0A;&#x0D;&#x0A;define (_STDCTRL_LIB_, &quot;stdctrl.lib.php&quot;);&#x0D;&#x0A;&#x0D;&#x0A;function in_values ($val, $vals) {&#x0D;&#x0A;&#x09;if (is_array ($vals))&#x0D;&#x0A;&#x09;&#x09;return in_array ($val, $vals);&#x0D;&#x0A;&#x09;else&#x0D;&#x0A;&#x09;&#x09;return $val == $vals;&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function outOption ($value, $text, $selected) {&#x0D;&#x0A;&#x09;printf (&quot;&lt;option value=\&quot;%s\&quot; %s&gt;%s&quot;, $value, $selected ? &quot;selected&quot;:&quot;&quot;, $text);&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function outRadio ($name, $value, $text, $checked) {&#x0D;&#x0A;&#x09;printf (&quot;&lt;input type=radio name=\&quot;%s\&quot; value=\&quot;%s\&quot; %s&gt;%s&quot;, $name, $value, $checked ? &quot;checked&quot;:&quot;&quot;, $text);&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function outCheckbox ($name, $value, $text, $checked) {&#x0D;&#x0A;&#x09;printf (&quot;&lt;input type=checkbox name=\&quot;%s\&quot; value=\&quot;%s\&quot; %s&gt;%s&quot;, $name, $value, $checked ? &quot;checked&quot;:&quot;&quot;, $text);&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function makeOptionsFromSimpleArray ($array, $selectedItems=false) {&#x0D;&#x0A;&#x09;for ($i=0; $i &lt; count ($array); $i++)&#x0D;&#x0A;&#x09;&#x09;outOption ($array[$i], $array[$i], in_values ($array[$i], $selectedItems));&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function makeOptionsFromArray ($array, $valueField, $textField, $selectedItems=false) {&#x0D;&#x0A;&#x09;for ($i=0; $i &lt; count ($array); $i++) {&#x0D;&#x0A;&#x09;&#x09;$value = $array[$i][$valueField];&#x0D;&#x0A;&#x09;&#x09;$text = $array[$i][$textField];&#x0D;&#x0A;&#x09;&#x09;outOption ($value, $text, in_values ($value, $selectedItems));&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function makeOptionsFromHashArray ($array, $selectedItems=false, $reverse=false) {&#x0D;&#x0A;&#x09;if ($reverse) {&#x0D;&#x0A;&#x09;&#x09;$key = &quot;value&quot;;&#x0D;&#x0A;&#x09;&#x09;$val = &quot;text&quot;;&#x0D;&#x0A;&#x09;} else {&#x0D;&#x0A;&#x09;&#x09;$key = &quot;text&quot;;&#x0D;&#x0A;&#x09;&#x09;$val = &quot;value&quot;;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;while (list (${$key}, ${$val}) = each ($array))&#x0D;&#x0A;&#x09;&#x09;outOption ($value, $text, in_values ($value, $selectedItems));&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function makeRadioFromArray ($ctrlName, $array, $checkedIndex=false) {&#x0D;&#x0A;&#x09;for ($i=0; $i&lt;=count ($array); $i++)&#x0D;&#x0A;&#x09;&#x09;outRadio ($ctrlName, $i, $array[$i], $i==$checkedIndex);&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function makeCheckboxesFromArray ($ctrlName, $array, $checkedItems=false) {&#x0D;&#x0A;&#x09;for($i=0; $i&lt;count ($array); $i++)&#x0D;&#x0A;&#x09;&#x09;outCheckbox ($ctrlName . $i, $i, $array[$i], in_values ($i, $checkedItems));&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;endif ?&gt;</code>
</snippet>
<snippet author="borislav_nedelchev" date_entered="2006-03-17" last_modified="2006-03-18 02:45:03" name="Smarty Autosetup form plugin" rating="5.00">
<description>Autosetup Smarty plugin capture forms controls from smarty templates and populate it&apos;s value attributes with values provided by user callback function.</description>
<code>&lt;?&#x0D;&#x0A;/**&#x0D;&#x0A; * FILE: block.autoform.php&#x0D;&#x0A; */&#x0D;&#x0A;&#x0D;&#x0A;/**&#x0D;&#x0A; * Smarty plugin&#x0D;&#x0A; * @package Smarty&#x0D;&#x0A; * @subpackage plugins&#x0D;&#x0A; */&#x0D;&#x0A;&#x0D;&#x0A;/**&#x0D;&#x0A; * Smarty {autoform}{/autoform} block plugin&#x0D;&#x0A; *&#x0D;&#x0A; * @author Borislav Nedelchev &lt;snairl@yahoo.com&gt;&#x0D;&#x0A; * @copyright Copyright (c) 2006, Borislav Nedelchev&#x0D;&#x0A; * &#x0D;&#x0A; * Type:     block function&lt;br&gt;&#x0D;&#x0A; * Name:     autoform&lt;br&gt;&#x0D;&#x0A; * Purpose:  Automatically sets value to the form controls via user provided callback function&#x0D;&#x0A; * @version autoform 1.0&#x0D;&#x0A; *           &#x0D;&#x0A; * @param array params&#x0D;&#x0A; * &lt;pre&gt;&#x0D;&#x0A; * Params:   func:object&#x0D;&#x0A; * &lt;/pre&gt;&#x0D;&#x0A; * @param string $content form content&#x0D;&#x0A; * @param Smarty $smarty not used&#x0D;&#x0A; * @param bool $repeat not used&#x0D;&#x0A; * @return string $content with autofilled form controls&#x0D;&#x0A; */&#x0D;&#x0A;function smarty_block_autoform($params,$content,&amp;$smarty,&amp;$repeat){&#x0D;&#x0A;&#x09;if($content==&apos;&apos;)return ;&#x0D;&#x0A;&#x09;preg_match_all(&quot;/&lt;\W*input[^&gt;]*/i&quot;,$content,$matches);&#x0D;&#x0A;&#x09;$field_info=array();&#x0D;&#x0A;&#x09;$output=&quot;&quot;;&#x0D;&#x0A;&#x09;$offset=0;&#x0D;&#x0A;&#x09;foreach ($matches[0] as $field){&#x0D;&#x0A;&#x09;&#x09;if(preg_match(&quot;/type=[&apos;\&quot;]([^&apos;\&quot;]*)/i&quot;,$field,$_type)){&#x0D;&#x0A;&#x09;&#x09;&#x09;$type=strtolower($_type[1]);&#x0D;&#x0A;&#x09;&#x09;}else $type=&quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;if($type==&quot;file&quot;)continue;&#x0D;&#x0A;&#x09;&#x09;if(preg_match(&quot;/name=[&apos;\&quot;]([^&apos;\&quot;]*)/i&quot;,$field,$_name)){&#x0D;&#x0A;&#x09;&#x09;&#x09;$name=$_name[1];&#x0D;&#x0A;&#x09;&#x09;}else $name=&quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;$has_value=false;&#x0D;&#x0A;&#x09;&#x09;if($type==&quot;image&quot;){&#x0D;&#x0A;&#x09;&#x09;&#x09;if(preg_match(&quot;/src=[&apos;\&quot;]([^&apos;\&quot;]*)/i&quot;,$field,$_value)){&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$value=$_name[1];&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$has_value=true;&#x0D;&#x0A;&#x09;&#x09;&#x09;}else $value=&quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;}else{&#x0D;&#x0A;&#x09;&#x09;&#x09;if(preg_match(&quot;/value=[&apos;\&quot;]([^&apos;\&quot;]*)/i&quot;,$field,$_value)){&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$value=$_name[1];&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$has_value=true;&#x0D;&#x0A;&#x09;&#x09;&#x09;}else $value=&quot;&quot;;&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;$id=isset($field_info[$name])?$field_info[$name]:0;&#x0D;&#x0A;&#x09;&#x09;$field_info[$name]=++$id;&#x0D;&#x0A;&#x09;&#x09;$default=false;&#x0D;&#x0A;&#x09;&#x09;$new_value=$params[&apos;func&apos;]-&gt;_handle_form_fields($type,$name,$value,$id,$default);&#x0D;&#x0A;&#x09;&#x09;$pos=strpos($content,$field,$offset);&#x0D;&#x0A;&#x09;&#x09;if($pos===false){&#x0D;&#x0A;&#x09;&#x09;&#x09;$smarty-&gt;trigger_error(&quot;autoform: cannot substitute content&quot;);&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;$flen=strlen($field);&#x0D;&#x0A;&#x09;&#x09;$output.=substr($content,$offset,$pos-$offset);&#x0D;&#x0A;&#x09;&#x09;$offset=$pos+$flen;&#x0D;&#x0A;&#x09;&#x09;if($has_value){&#x0D;&#x0A;&#x09;&#x09;&#x09;if($type==&quot;image&quot;)$field=preg_replace(&quot;/(src=[&apos;\&quot;])([^&apos;\&quot;]*)/i&quot;,&quot;\${1}$new_value&quot;,$field);&#x0D;&#x0A;&#x09;&#x09;&#x09;else $field=preg_replace(&quot;/(value=[&apos;\&quot;])([^&apos;\&quot;]*)/i&quot;,&quot;\${1}$new_value&quot;,$field);&#x0D;&#x0A;&#x09;&#x09;}else{&#x0D;&#x0A;&#x09;&#x09;&#x09;if($type==&apos;image&apos;)$val_attr=&quot;src&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;else $val_attr=&quot;value&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;$pos=strrpos($field,&quot; &quot;);&#x0D;&#x0A;&#x09;&#x09;&#x09;if($pos===false){&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$field.=&quot; {$val_attr}=&apos;$new_value&apos;&quot;;&#x0D;&#x0A;&#x09;&#x09;&#x09;}else{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$field=substr($field,0,$pos).&quot; {$val_attr}=&apos;$new_value&apos;&quot;.substr($field,$pos);&#x0D;&#x0A;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;if(($type==&apos;checkbox&apos;||$type==&apos;radio&apos;)&amp;&amp;$default){&#x0D;&#x0A;&#x09;&#x09;&#x09;$pos=strrpos($field,&quot; &quot;);&#x0D;&#x0A;&#x09;&#x09;&#x09;if($pos===false){&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$field.=&apos; checked=&quot;checked&quot;&apos;;&#x0D;&#x0A;&#x09;&#x09;&#x09;}else{&#x0D;&#x0A;&#x09;&#x09;&#x09;&#x09;$field=substr($field,0,$pos).&apos; checked=&quot;checked&quot;&apos;.substr($field,$pos);&#x0D;&#x0A;&#x09;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;}&#x0D;&#x0A;&#x09;&#x09;$output.=$field;&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;//textareas are handled separately&#x0D;&#x0A;&#x09;preg_match_all(&quot;/(&lt;\W*textarea[^&gt;]*&gt;)([^&lt;]*)([^&gt;]*)/i&quot;,$content,$matches);&#x0D;&#x0A;&#x09;for ($i=0;$i&lt;count($matches[0]);$i++){&#x0D;&#x0A;&#x09;&#x09;preg_match(&quot;/name=[&apos;\&quot;]([^&apos;\&quot;]*)/i&quot;,$matches[1][$i],$_name);&#x0D;&#x0A;&#x09;&#x09;$output=str_replace($matches[0][$i],$matches[1][$i].$params[&apos;func&apos;]-&gt;_handle_form_fields(&quot;textarea&quot;,$_name[1],$matches[2][$i],1,$default).$matches[3][$i],$output);&#x0D;&#x0A;&#x09;}&#x0D;&#x0A;&#x09;return $output;&#x0D;&#x0A;}&#x0D;&#x0A;?&gt;</code>
</snippet>
<snippet author="partyzan" date_entered="2001-08-22" last_modified="2001-08-31 06:33:54" name="user data type validation" rating="5.00">
<description>Validation class for user submitted data. I had many times had to make sure people submitted the right kind of data into form fields. After writting many functions in many places. I&apos;ve decided to compose on that i can use &#x0D;&#x0A;all the time</description>
<code>&lt;?&#x0D;&#x0A;/***********************************************************************************************************&#x0D;&#x0A;*   Author : Nick Geller                                                                                                                                         *&#x0D;&#x0A;*   Description : user data type validation                                                                                                      *&#x0D;&#x0A;*   Date : August 18, 2001 | version 1.3 revised                                                                                            *&#x0D;&#x0A;*                                                                                                                                                                                *&#x0D;&#x0A;*                                                                                                                                                                                *&#x0D;&#x0A;*   Fixes:                                                                                                                                                                  *&#x0D;&#x0A;*      1.1)email functionality added thanks to Henry.W                                                                                *&#x0D;&#x0A;*      1.2)also the alpha function has been modified to accept spaces                                                   *&#x0D;&#x0A;*      1.3)global classArgArray now flushes previous data thanks to Vitaly.F                                        *&#x0D;&#x0A;*                                                                                                                                                                                *&#x0D;&#x0A;*                                                                                                                                                                                *&#x0D;&#x0A;*                                                                                                                                                                                *&#x0D;&#x0A;*   This class expects 2 variables                                                                                                                    *&#x0D;&#x0A;*      1. user defined data                                                                                                                                     *&#x0D;&#x0A;*      2. configuration string                                                                                                                                 *&#x0D;&#x0A;*   returns false if the field passes all the validation test, passed in the configuration string          *&#x0D;&#x0A;*                                                                                                                                                                                 *      &#x0D;&#x0A;*   *NOTE* this class returns false if passed field validates against the requered test                      *&#x0D;&#x0A;*   This was done to avoid the if(! syntax for usage                                                                                      *&#x0D;&#x0A;*                                                                                                                                                                                 *&#x0D;&#x0A;*   expected format of the configuration string:                                                                                            *&#x0D;&#x0A;*   &quot;ls||INT||gt||INT||eq||INT||match||STRING||has||CHAR||not||STRING||alpha||numeric||email&quot;            *&#x0D;&#x0A;*   any one of these or all are expected in the configuration string, but must follow the format!!!  *&#x0D;&#x0A;*                                                                                                                                                                                *&#x0D;&#x0A;*   CLASS ABBRIVIATIONS :                                                                                                                               *&#x0D;&#x0A;*                                                                                                                                                                                *&#x0D;&#x0A;*   ls = cant be less than this number, requires a number                                                                        *&#x0D;&#x0A;*   gt = cant be greater than this number, requires a number                                                                  *&#x0D;&#x0A;*   eq = string size has to be equal to this number                                                                                      *&#x0D;&#x0A;*   match = string must match this string                                                                                                      *&#x0D;&#x0A;*   has = string must contain this character                                                                                                 *&#x0D;&#x0A;*   not = string can not match this string                                                                                                       *&#x0D;&#x0A;*   alpha = all characters in a string must be alphabetical                                                                       *&#x0D;&#x0A;*   numeric = all characters must be numneric                                                                                          *&#x0D;&#x0A;*   email = validates string to be of similar nature as an email address                                              *&#x0D;&#x0A;*                                                                                                                                                                              *&#x0D;&#x0A;**********************************************************************************************************/&#x0D;&#x0A;&#x0D;&#x0A;CLASS validation&#x0D;&#x0A;{&#x0D;&#x0A;&#x0D;&#x0A;   var $config_string; &#x09;&#x09;&#x09;          /* validation definition string */&#x0D;&#x0A;   var $field;                                                                                  /* user defined data type */&#x0D;&#x0A;   var $classArgArray;                                                               /* actions for the validation */&#x0D;&#x0A;   var $error;                                                                                /* errors retured by the validate_field function */&#x0D;&#x0A;&#x0D;&#x0A;   function validate($configStr, $passedField)&#x0D;&#x0A;   {&#x0D;&#x0A;      $this-&gt;classArgArray = array();&#x0D;&#x0A;      $this-&gt;error = false;&#x0D;&#x0A;      $this-&gt;config_string = trim($configStr);&#x0D;&#x0A;      $this-&gt;field = trim($passedField);&#x0D;&#x0A;      $this-&gt;buildProperties();&#x0D;&#x0A;      $this-&gt;validate_field();&#x0D;&#x0A;      return $this-&gt;error;&#x0D;&#x0A;   }&#x0D;&#x0A;&#x0D;&#x0A;function buildProperties()&#x0D;&#x0A;{&#x0D;&#x0A;   $argumentsArray = explode(&quot;||&quot;, $this-&gt;config_string);&#x0D;&#x0A;   for($i=0; $i&lt; sizeOf($argumentsArray); $i++)&#x0D;&#x0A;   {&#x0D;&#x0A;      if($argumentsArray[$i] == &quot;ls&quot; || $argumentsArray[$i] == &quot;gt&quot; || $argumentsArray[$i] == &quot;eq&quot;)&#x0D;&#x0A;      {&#x0D;&#x0A;         if(eregi(&quot;^[0-9]+$&quot;, $argumentsArray[$i+1]))&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;classArgArray[] = $argumentsArray[$i];&#x0D;&#x0A;            $this-&gt;classArgArray[] = $argumentsArray[$i+1];&#x0D;&#x0A;         }&#x0D;&#x0A;      }&#x0D;&#x0A;      else if($argumentsArray[$i] == &quot;match&quot; || $argumentsArray[$i] == &quot;has&quot; || $argumentsArray[$i] == &quot;not&quot;)&#x0D;&#x0A;      {&#x0D;&#x0A;         if(isset($argumentsArray[$i+1]) &amp;&amp; !$argumentsArray[$i+1] ==&quot;&quot;)&#x0D;&#x0A;         {&#x0D;&#x0A;            if($argumentsArray[$i+1] != &quot;ls&quot; || $argumentsArray[$i+1] != &quot;gt&quot;&#x0D;&#x0A;            || $argumentsArray[$i+1] != &quot;eq&quot; || $argumentsArray[$i+1] != &quot;match&quot; &#x0D;&#x0A;            || $argumentsArray[$i+1] != &quot;has&quot; || $argumentsArray[$i+1] != &quot;alpha&quot; &#x0D;&#x0A;            || $argumentsArray[$i+1] != &quot;numeric&quot; || $argumentsArray[$i+1] != &quot;not&quot;&#x0D;&#x0A;            ||  $argumentsArray[$i+1] != &quot;email&quot;)&#x0D;&#x0A;            {&#x0D;&#x0A;               $this-&gt;classArgArray[] = $argumentsArray[$i];&#x0D;&#x0A;               $this-&gt;classArgArray[] = $argumentsArray[$i+1];&#x0D;&#x0A;            }&#x0D;&#x0A;         }&#x0D;&#x0A;       }&#x0D;&#x0A;       else if ($argumentsArray[$i] == &quot;numeric&quot; || $argumentsArray[$i] == &quot;alpha&quot; || $argumentsArray[$i] == &quot;email&quot;)&#x0D;&#x0A;       {&#x0D;&#x0A;          $this-&gt;classArgArray[] = $argumentsArray[$i];&#x0D;&#x0A;       }&#x0D;&#x0A;   }&#x0D;&#x0A;}&#x0D;&#x0A;&#x0D;&#x0A;function validate_field()&#x0D;&#x0A;{&#x0D;&#x0A;   $field_string_size = strlen($this-&gt;field); /* field string size */&#x0D;&#x0A;   for($j = 0; $j &lt; sizeOf($this-&gt;classArgArray); $j++)&#x0D;&#x0A;   {&#x0D;&#x0A;      switch($this-&gt;classArgArray[$j])&#x0D;&#x0A;      {&#x0D;&#x0A;         case ls:&#x0D;&#x0A;         /* field is less than minimum required lenth */&#x0D;&#x0A;         if($field_string_size &lt; $this-&gt;classArgArray[$j+1])&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;error = true;&#x0D;&#x0A;         }&#x0D;&#x0A;         break;&#x0D;&#x0A;         case gt:&#x0D;&#x0A;         /* field is greater than maximum allowed lenth */&#x0D;&#x0A;         if($field_string_size &gt; $this-&gt;classArgArray[$j+1])&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;error = true;&#x0D;&#x0A;         }&#x0D;&#x0A;         break;&#x0D;&#x0A;         case eq:&#x0D;&#x0A;         /* field is does not equal to required lenth */&#x0D;&#x0A;         if($field_string_size != $this-&gt;classArgArray[$j+1])&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;error = true;&#x0D;&#x0A;         }&#x0D;&#x0A;         break;&#x0D;&#x0A;         case match:&#x0D;&#x0A;         /* field does not match a required value */&#x0D;&#x0A;         if($this-&gt;field != $this-&gt;classArgArray[$j+1])&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;error = true;&#x0D;&#x0A;         }&#x0D;&#x0A;         break;&#x0D;&#x0A;         case alpha:&#x0D;&#x0A;         /* only alphabetical characters are required for this field */&#x0D;&#x0A;         if(!eregi(&quot;^[a-zA-Z\ ]+$&quot;,  $this-&gt;field))&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;error = true;&#x0D;&#x0A;         }&#x0D;&#x0A;         break;&#x0D;&#x0A;         case numeric:&#x0D;&#x0A;         /* only numeric characters are required for this field*/&#x0D;&#x0A;         if(!eregi(&quot;^[0-9]+$&quot;,  $this-&gt;field))&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;error = true;&#x0D;&#x0A;         }&#x0D;&#x0A;         break;&#x0D;&#x0A;         case has:&#x0D;&#x0A;         /* field does not contain a required character */&#x0D;&#x0A;         if(!strstr($this-&gt;field, $this-&gt;classArgArray[$j+1]))&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;error = true;&#x0D;&#x0A;         }&#x0D;&#x0A;         break;&#x0D;&#x0A;         case not:&#x0D;&#x0A;         /* fields value is not acceptable */&#x0D;&#x0A;         if(!$this-&gt;field == $this-&gt;classArgArray[$j+1])&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;error = true;&#x0D;&#x0A;         }&#x0D;&#x0A;         break;&#x0D;&#x0A;         case email:&#x0D;&#x0A;         /* fields value is not acceptable */&#x0D;&#x0A;         if(!preg_match(&quot;/^\s*[^@ \r\n\t\#\$\%\;]+@[^@ \r\n\t\#\$\%\;]+\.\w{2,3}\s*$/&quot;, $this-&gt;field))&#x0D;&#x0A;         {&#x0D;&#x0A;            $this-&gt;error = true;&#x0D;&#x0A;         }&#x0D;&#x0A;         break;&#x0D;&#x0A;      }&#x0D;&#x0A;   }&#x0D;&#x0A;}&#x0D;&#x0A;}&#x0D;&#x0A;?&gt;&#x0D;&#x0A;</code>
</snippet>
<snippet author="kyong" date_entered="2001-02-19" last_modified="2001-02-22 16:19:58" name="Very simple option control" rating="0.00">
<description>I was not so comfortable with this one( http://zend.com/codex.php?id=59&amp;single=1 )&#x0D;&#x0A;So, I simplified the one enough to feed me.</description>
<code>// Written by kyong@pauline.or.kr&#x0D;&#x0A;function print_option($name, $options) { // php4 friendly&#x0D;&#x0A;    global $$name;  &#x0D;&#x0A;&#x0D;&#x0A;    echo &quot;&lt;select name=\&quot;$name\&quot;&gt;\n&quot;;&#x0D;&#x0A;    foreach ($options as $value =&gt; $text) {&#x0D;&#x0A;        printf (&quot;&lt;option value=\&quot;%s\&quot; %s&gt; %s &lt;/option&gt;\n&quot;, $value, $value == $$name ? &quot;selected&quot;:&quot;&quot;, $text); //selected one goes first&#x0D;&#x0A;    }&#x0D;&#x0A;    echo &quot;&lt;/select&gt;\n&quot;;&#x0D;&#x0A;}&#x0D;&#x0A;function print_option2($name, $options) { // php3 friendly&#x0D;&#x0A;    global $$name;  &#x0D;&#x0A;&#x0D;&#x0A;    echo &quot;&lt;select name=\&quot;$name\&quot;&gt;\n&quot;;&#x0D;&#x0A;    while (list ($value, $text) = each ($options)) {&#x0D;&#x0A;        printf (&quot;&lt;option value=\&quot;%s\&quot; %s&gt; %s &lt;/option&gt;\n&quot;, $value, $value == $$name ? &quot;selected&quot;:&quot;&quot;, $text); &#x0D;&#x0A;    }&#x0D;&#x0A;    echo &quot;&lt;/select&gt;\n&quot;;&#x0D;&#x0A;}&#x0D;&#x0A;function print_option3($name, $value, $text) { // your flavor?&#x0D;&#x0A;    global $$name;  &#x0D;&#x0A;&#x0D;&#x0A;    if (count($value) != count($text)) {&#x0D;&#x0A;        echo &quot;Should be equal in array size&quot;;&#x0D;&#x0A;        exit;&#x0D;&#x0A;    }&#x0D;&#x0A;    echo &quot;&lt;select name=\&quot;$name\&quot;&gt;\n&quot;;&#x0D;&#x0A;    for ($i=0; $i&lt;count($value); $i++) {&#x0D;&#x0A;        printf (&quot;&lt;option value=\&quot;%s\&quot; %s&gt; %s &lt;/option&gt;\n&quot;, $value[$i], $value[$i] == $$name ? &quot;selected&quot;:&quot;&quot;, $text[$i]); &#x0D;&#x0A;}</code>
</snippet>
</category>